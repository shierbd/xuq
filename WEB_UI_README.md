# Web UI 使用说明

## 🚀 快速启动

### 1. 安装Streamlit（如果还没安装）

```bash
pip install streamlit
```

### 2. 启动Web UI

```bash
# 在项目根目录运行
streamlit run web_ui.py
```

### 3. 访问界面

浏览器会自动打开，或手动访问：
```
http://localhost:8501
```

---

## 📋 功能说明

### 🏠 首页概览
- 查看项目工作流程
- 数据库统计信息
- 快速操作入口

### 📥 Phase 1: 数据导入
- 选择数据源（SEMRUSH/下拉词/相关搜索）
- 配置导入参数
- 实时查看导入日志
- 查看数据库状态

### 🔄 Phase 2: 大组聚类
- 调整聚类参数（min_cluster_size, min_samples）
- 选择是否使用缓存
- 实时监控聚类进度
- 查看聚类结果统计

### ✅ Phase 3: 聚类筛选
- 导出聚类报告（CSV + HTML）
- 在线查看和筛选聚类
- 快速标记选中/取消
- 导入CSV编辑结果

### 📊 Phase 4: 需求生成
- 配置小组聚类参数
- 选择是否跳过LLM
- 查看需求卡片列表
- 查看需求详情

### 🏷️ Phase 5: Token提取
- 设置采样大小和最小词频
- 查看已提取的tokens
- 按类型筛选和排序
- 生成词云（需安装wordcloud）

### 📋 数据查看与管理
- 集中查看所有数据（大组/小组聚类、需求卡片、Tokens、短语）
- 支持筛选和排序
- **HTML导出功能**（⭐重要）：一键导出为HTML格式，方便使用浏览器翻译
- 下载HTML文件到本地
- 支持大量数据的采样显示

**💡 特别说明**：由于系统数据是英文的，如果你不懂英语，可以使用以下方式翻译：
1. 点击"📤 导出为HTML"按钮
2. 在浏览器中打开生成的HTML文件
3. 右键点击页面 → 选择"翻译为中文"（Chrome/Edge浏览器）
4. 所有英文内容会自动翻译成中文！

### ⚙️ 配置管理
- 查看所有系统配置
- 测试数据库/LLM/Embedding连接
- 在线编辑配置文件
- API成本估算

### 📖 使用说明
- 完整文档查看器
- 快速参考（命令/配置/故障排查）
- API成本参考
- 外部资源链接

---

## 🎨 界面特性

### 实时日志输出
所有Phase运行时都会显示实时日志，方便监控进度和排查问题。

### 交互式操作
- 表格筛选和排序
- 快速操作按钮
- 参数实时预览
- 状态实时刷新

### 响应式设计
- 自适应布局
- 侧边栏导航
- 美化的CSS样式
- 清晰的状态指示

---

## 💡 使用技巧

### 1. 测试模式
首次使用建议勾选"测试模式"相关选项：
- Phase 1: 勾选"使用测试限制"
- Phase 2: 勾选"使用测试限制"
- Phase 4: 勾选"跳过LLM"和"限制处理大组数"
- Phase 5: 勾选"跳过LLM分类"

### 2. 查看日志
如果遇到问题，查看实时日志输出可以快速定位错误。

### 3. 参数调整
在Phase 2和Phase 4中，可以实时调整聚类参数并查看预期结果。

### 4. 配置测试
在"配置管理"页面使用测试功能验证配置是否正确。

---

## 🔧 故障排查

### Web UI无法启动

```bash
# 检查Streamlit是否安装
pip list | grep streamlit

# 重新安装
pip install --upgrade streamlit
```

### 端口被占用

```bash
# 使用其他端口
streamlit run web_ui.py --server.port 8502
```

### 导入错误

确保在项目根目录运行：
```bash
cd D:\xiangmu\词根聚类需求挖掘
streamlit run web_ui.py
```

### 页面显示异常

清除Streamlit缓存：
```bash
streamlit cache clear
```

---

## 📝 注意事项

1. **长时间运行**: Phase 2和Phase 4可能需要几分钟，请耐心等待
2. **不要关闭浏览器**: 运行过程中不要关闭浏览器标签页
3. **配置修改**: 修改配置后需要重启应用
4. **数据安全**: 不要在生产环境暴露Web UI端口

---

## 🆘 获取帮助

- 查看"使用说明"页面获取详细文档
- 查看"配置管理"页面测试各项配置
- 遇到问题先查看日志输出
- 使用测试模式验证流程

---

**版本**: MVP v1.0
**最后更新**: 2024-12-19
**开发框架**: Streamlit 1.28+

**祝你挖掘出好需求！** 🚀
