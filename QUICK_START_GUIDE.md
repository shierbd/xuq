# 🚀 快速开始指南 - 规则框架使用

**版本**: v1.0
**更新日期**: 2026-01-27

---

## 📋 项目当前状态

### ✅ 已完成

1. **前后端架构迁移** - 完成 Vue 3 + FastAPI 架构迁移
2. **规则框架接入** - 建立需求驱动开发体系
3. **核心文件创建** - CLAUDE.md, USER_REQUIREMENTS.md, .gitignore
4. **Git 版本控制** - 所有更改已提交

### ⏳ 待完成

根据 `docs/USER_REQUIREMENTS.md`，以下是按优先级排序的待完成功能：

#### P0 需求（必须优先实现）

1. **数据导入功能** ⏳
   - CSV 文件上传
   - SEMrush 数据导入
   - Reddit 数据导入
   - Related Search 数据导入

2. **语义聚类功能（核心）** ⏳
   - Sentence Transformers 向量化
   - HDBSCAN 聚类
   - 参数调优
   - 生成聚类结果

3. **聚类结果可视化** ⏳
   - 簇列表展示
   - 簇详情查看
   - 簇统计信息
   - 噪音点展示

4. **方向筛选功能** ⏳
   - 标记感兴趣的簇
   - 标记 low priority 的簇
   - 添加备注
   - 生成筛选结果报告

5. **数据导出功能** ⏳
   - 导出聚类结果（CSV）
   - 导出簇汇总（CSV）
   - 导出筛选结果（CSV）

---

## 🎯 开始开发前必读

### 第一步：读取需求文档（必须）

```bash
# 在 Claude Code 中执行
cat docs/USER_REQUIREMENTS.md
```

### 第二步：需求对齐检查

回答以下三个问题：
1. ✅ 当前任务是否符合需求文档？
2. ✅ 当前任务是否偏离了核心需求？
3. ✅ 需求文档是否需要更新？

### 第三步：确认优先级

- **P0 需求** - 必须优先处理
- **P1 需求** - 重要但可以稍后
- **P2 需求** - 可以延后

---

## 🔧 开发工作流

### 标准流程

```
1. 读取需求文档 (docs/USER_REQUIREMENTS.md)
   ↓
2. 确认任务符合需求
   ↓
3. 设计技术方案
   ↓
4. 开发实现
   ↓
5. 测试验证
   ↓
6. 更新文档
   ↓
7. Git 提交
```

### 开发规范

#### Python 代码规范
- 使用 Python 3.11+
- 遵循 PEP 8 规范
- 使用类型注解
- 编写清晰的文档字符串

#### TypeScript 代码规范
- 使用 TypeScript 5.0+
- 遵循 ESLint 规范
- 使用严格的类型检查
- 编写清晰的注释

#### Git 提交规范
```
feat: 新功能
fix: 修复 Bug
docs: 文档更新
style: 代码格式调整
refactor: 重构
test: 测试相关
chore: 构建/工具相关
```

---

## 🚀 环境配置

### 1. 配置环境变量

```bash
# 复制环境变量模板
cp .env.example .env

# 编辑 .env 文件，填入配置
# CLAUDE_API_KEY=your_api_key_here
```

### 2. 安装后端依赖

```bash
# 安装 Python 依赖
pip install -r requirements.txt
```

### 3. 安装前端依赖

```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 返回项目根目录
cd ..
```

### 4. 启动服务

```bash
# 启动后端（终端 1）
python -m uvicorn api.main:app --reload --port 8000

# 启动前端（终端 2）
cd frontend
npm run dev
```

### 5. 访问应用

- **前端界面**: http://localhost:5173
- **后端 API**: http://localhost:8000
- **API 文档**: http://localhost:8000/docs

---

## 📚 核心文档

### 必读文档

1. **CLAUDE.md** - Claude Code 配置文件
   - 需求驱动原则
   - 自动错误恢复机制
   - 项目结构说明
   - 开发工作流规范

2. **docs/USER_REQUIREMENTS.md** - 用户需求文档
   - P0/P1/P2 优先级需求
   - 完整的工作流程
   - 数据字段规范
   - 成功标准和实施计划

3. **RULES_FRAMEWORK_INTEGRATION_REPORT.md** - 规则框架接入报告
   - 接入流程回顾
   - 使用指南
   - 核心原则

### 参考文档

4. **docs/01_需求挖掘方法论.md** - 完整方法论
5. **docs/02_字段命名规范.md** - 字段命名标准
6. **docs/03_实施优先级指南.md** - Phase 1/2/3 规划
7. **docs/04_快速开始指南.md** - 快速上手

---

## 🎯 推荐的开发顺序

### Phase 1: 核心功能（当前阶段）

**目标**: 实现 P0 需求，建立基础工作流

**任务**:
1. ⏳ 数据导入功能
   - 实现 CSV 文件上传接口
   - 实现数据格式验证
   - 实现数据清洗和标准化

2. ⏳ 语义聚类功能
   - 集成 Sentence Transformers
   - 实现 HDBSCAN 聚类
   - 实现参数调优接口
   - 生成聚类结果

3. ⏳ 聚类结果可视化
   - 实现簇列表展示
   - 实现簇详情查看
   - 实现簇统计信息展示

4. ⏳ 方向筛选功能
   - 实现簇标记功能
   - 实现备注添加功能
   - 生成筛选结果报告

5. ⏳ 数据导出功能
   - 实现 CSV 导出接口
   - 实现自定义导出字段
   - 实现批量导出

**预期时间**: 2-3 周

---

## 🚨 常见问题

### Q1: 如何开始第一个功能开发？

**回答**:
1. 读取 `docs/USER_REQUIREMENTS.md`
2. 选择 P0 需求中的第一个功能（数据导入）
3. 参考 `docs/02_字段命名规范.md` 设计数据模型
4. 开始开发实现

### Q2: 遇到文件操作错误怎么办？

**回答**:
自动错误恢复机制会按以下顺序尝试：
1. Edit 工具
2. Write 工具
3. Bash cat heredoc
4. Python 写入
5. Python 临时文件
6. 备用文件名

详见 `CLAUDE.md` 中的"自动错误恢复机制"部分。

### Q3: 如何确保不偏离核心需求？

**回答**:
每次开始新任务前，必须先执行：
```bash
cat docs/USER_REQUIREMENTS.md
```
然后回答三个问题：
1. 当前任务是否符合需求文档？
2. 当前任务是否偏离了核心需求？
3. 需求文档是否需要更新？

### Q4: P0/P1/P2 优先级如何理解？

**回答**:
- **P0 需求** - 必须优先处理，是系统的核心功能
- **P1 需求** - 重要但可以稍后，是增强功能
- **P2 需求** - 可以延后，是高级功能

**原则**: 必须先完成所有 P0 需求，再考虑 P1 需求。

---

## 🎯 核心原则

### 1. 需求驱动开发

**原则**: 所有开发必须基于 `docs/USER_REQUIREMENTS.md`

**禁止**:
- ❌ 未读取需求文档就开始工作
- ❌ 做需求文档之外的事情
- ❌ 偏离核心需求

### 2. 只分组，不删除

**原则**: 系统提供视图，人工做决策

**实践**:
- ✅ 聚类只分组，不过滤
- ✅ 筛选标记 low priority，不删除
- ✅ 噪音点保留，人工决定是否使用

### 3. 轻量版起步，避免复杂度压垮

**原则**: 分阶段实施，避免一次性做太多

**实施**:
- Phase 1（必须）：A2 → A3 → 人工筛选
- Phase 2（重要）：B1 → B3 → B6
- Phase 3（可选）：大模型 + Trends + 需求库

### 4. 大模型输出是假设，不是事实

**原则**: 大模型输出需要验证

**验证**:
- A4 的簇解释：需要 SERP 验证
- B3 的 5 维框架：需要访谈验证
- 决策优先级：SERP+访谈 > BI > 经验 > 模型

---

## 📞 获取帮助

### 文档索引

1. **CLAUDE.md** - Claude Code 配置和规范
2. **docs/USER_REQUIREMENTS.md** - 用户需求文档
3. **RULES_FRAMEWORK_INTEGRATION_REPORT.md** - 规则框架接入报告
4. **docs/01_需求挖掘方法论.md** - 完整方法论
5. **docs/02_字段命名规范.md** - 字段命名标准
6. **docs/03_实施优先级指南.md** - Phase 1/2/3 规划
7. **docs/04_快速开始指南.md** - 快速上手

### 故障排查

#### 前端问题
1. 检查 Node.js 版本（需要 18+）
2. 清理缓存：`rm -rf node_modules && npm install`
3. 检查环境变量配置
4. 查看浏览器控制台错误

#### 后端问题
1. 检查 Python 版本（需要 3.11+）
2. 检查依赖安装：`pip list`
3. 检查环境变量配置
4. 查看日志文件：`tail -f logs/app.log`

#### AI 模块问题
1. 检查 Claude API 密钥
2. 检查网络连接
3. 查看 API 调用日志
4. 验证输入数据格式

---

## 🎊 开始开发

**现在可以开始需求驱动的有序开发了！**

**第一步**: 读取需求文档
```bash
cat docs/USER_REQUIREMENTS.md
```

**第二步**: 选择 P0 需求中的第一个功能

**第三步**: 开始开发实现

**祝你开发顺利！** 🚀

---

**文档版本**: v1.0
**最后更新**: 2026-01-27
**创建者**: Claude Sonnet 4.5
