# é¡¹ç›®åˆå¹¶å®Œæˆæ€»ç»“

## ğŸ“‹ åˆå¹¶æ¦‚è¿°

**åˆå¹¶æ—¥æœŸ**: 2026-01-27
**åˆå¹¶ç±»å‹**: æ¨¡å—åŒ–ç»Ÿä¸€
**é¡¹ç›®åç§°**: éœ€æ±‚æŒ–æ˜ç³»ç»Ÿ v2.0

### åˆå¹¶å‰çŠ¶æ€
- **ç³»ç»Ÿ1**: è¯æ ¹èšç±»ç³»ç»Ÿï¼ˆç‹¬ç«‹è„šæœ¬ï¼‰
- **ç³»ç»Ÿ2**: Etsyå•†å“ç®¡ç†ç³»ç»Ÿï¼ˆFastAPIåç«¯ï¼‰

### åˆå¹¶åçŠ¶æ€
- **ç»Ÿä¸€ç³»ç»Ÿ**: éœ€æ±‚æŒ–æ˜ç³»ç»Ÿ
- **ä¸¤å¤§æ¨¡å—**:
  - è¯æ ¹èšç±»æ¨¡å—
  - å•†å“ç®¡ç†æ¨¡å—

---

## ğŸ¯ åˆå¹¶ç›®æ ‡

å°†ä¸¤ä¸ªç‹¬ç«‹ç³»ç»Ÿåˆå¹¶ä¸ºä¸€ä¸ªç»Ÿä¸€çš„éœ€æ±‚æŒ–æ˜å¹³å°ï¼Œå®ç°ï¼š

1. âœ… ç»Ÿä¸€çš„åç«¯æ¶æ„ï¼ˆbackend/ï¼‰
2. âœ… ç»Ÿä¸€çš„å‰ç«¯åº”ç”¨ï¼ˆfrontend/ï¼‰
3. âœ… ç»Ÿä¸€çš„æ•°æ®åº“ï¼ˆSQLiteï¼‰
4. âœ… ç»Ÿä¸€çš„å¯åŠ¨æ–¹å¼
5. âœ… æ¨¡å—åŒ–çš„ä»£ç ç»„ç»‡

---

## ğŸ“ é¡¹ç›®ç»“æ„å˜åŒ–

### åç«¯ç»“æ„

```
backend/
â”œâ”€â”€ main.py                    # ç»Ÿä¸€çš„FastAPIåº”ç”¨å…¥å£
â”œâ”€â”€ database.py                # ç»Ÿä¸€çš„æ•°æ®åº“é…ç½®
â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ __init__.py           # å¯¼å‡ºæ‰€æœ‰æ¨¡å‹
â”‚   â”œâ”€â”€ product.py            # å•†å“æ¨¡å‹
â”‚   â””â”€â”€ keyword.py            # å…³é”®è¯æ¨¡å‹ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ routers/                   # APIè·¯ç”±
    â”œâ”€â”€ __init__.py           # å¯¼å‡ºæ‰€æœ‰è·¯ç”±
    â”œâ”€â”€ products.py           # å•†å“ç®¡ç†è·¯ç”±
    â””â”€â”€ keywords.py           # è¯æ ¹èšç±»è·¯ç”±ï¼ˆæ–°å¢ï¼‰
```

### æ•°æ®åº“ç»“æ„

**ç»Ÿä¸€æ•°æ®åº“**: `data/products.db`

**æ•°æ®è¡¨**:
1. `products` - å•†å“æ•°æ®è¡¨ï¼ˆå·²å­˜åœ¨ï¼‰
2. `keywords` - å…³é”®è¯æ•°æ®è¡¨ï¼ˆæ–°å¢ï¼‰
3. `cluster_summaries` - ç°‡æ±‡æ€»è¡¨ï¼ˆæ–°å¢ï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. æ•°æ®æ¨¡å‹åˆ›å»º

#### Keyword æ¨¡å‹ (backend/models/keyword.py)

```python
class Keyword(Base):
    """å…³é”®è¯æ•°æ®æ¨¡å‹"""
    __tablename__ = "keywords"

    # ä¸»é”®
    keyword_id = Column(Integer, primary_key=True, autoincrement=True)

    # åŸºç¡€å­—æ®µ
    keyword = Column(String(500), nullable=False, index=True)
    seed_word = Column(String(100), nullable=False, index=True)
    seed_group = Column(String(100))
    source = Column(String(50))

    # SEMrush æ•°æ®å­—æ®µ
    intent = Column(String(100))
    volume = Column(Integer)
    trend = Column(Text)
    keyword_difficulty = Column(Integer)
    cpc_usd = Column(Float)
    competitive_density = Column(Float)
    serp_features = Column(Text)
    number_of_results = Column(Float)
    source_file = Column(String(200))

    # èšç±»ç›¸å…³å­—æ®µ
    cluster_id_a = Column(Integer, index=True)
    cluster_id_b = Column(Integer, index=True)
    cluster_size = Column(Integer)
    is_noise = Column(Boolean, default=False)

    # æ–‡æœ¬ç‰¹å¾
    word_count = Column(Integer)
    phrase_length = Column(Integer)

    # æ ‡è®°å­—æ®µ
    is_selected = Column(Boolean, default=False)
    is_low_priority = Column(Boolean, default=False)
    notes = Column(Text)

    # æ—¶é—´æˆ³
    import_time = Column(DateTime, nullable=False, default=datetime.now)
    is_deleted = Column(Boolean, nullable=False, default=False)
```

#### ClusterSummary æ¨¡å‹ (backend/models/keyword.py)

```python
class ClusterSummary(Base):
    """ç°‡æ±‡æ€»æ•°æ®æ¨¡å‹"""
    __tablename__ = "cluster_summaries"

    summary_id = Column(Integer, primary_key=True, autoincrement=True)
    cluster_id = Column(Integer, nullable=False, index=True)
    stage = Column(String(10), nullable=False)
    cluster_size = Column(Integer, nullable=False)
    seed_words_in_cluster = Column(Text)
    top_keywords = Column(Text)
    example_phrases = Column(Text)
    cluster_label = Column(String(200))
    cluster_explanation = Column(Text)
    avg_volume = Column(Float)
    total_volume = Column(Float)
    is_direction = Column(Boolean, default=False)
    priority = Column(String(20))
    created_time = Column(DateTime, nullable=False, default=datetime.now)
    updated_time = Column(DateTime, onupdate=datetime.now)
```

### 2. API è·¯ç”±åˆ›å»º

#### Keywords è·¯ç”± (backend/routers/keywords.py)

åˆ›å»ºäº†ä»¥ä¸‹ API ç«¯ç‚¹ï¼š

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/keywords/import` | POST | å¯¼å…¥å…³é”®è¯æ•°æ®ï¼ˆCSVï¼‰ |
| `/api/keywords/` | GET | è·å–å…³é”®è¯åˆ—è¡¨ï¼ˆåˆ†é¡µã€æœç´¢ã€ç­›é€‰ï¼‰ |
| `/api/keywords/count` | GET | è·å–å…³é”®è¯æ€»æ•° |
| `/api/keywords/clusters/overview` | GET | è·å–æ‰€æœ‰ç°‡çš„æ¦‚è§ˆ |
| `/api/keywords/clusters/{cluster_id}` | GET | è·å–å•ä¸ªç°‡çš„è¯¦ç»†ä¿¡æ¯ |
| `/api/keywords/seed-words` | GET | è·å–æ‰€æœ‰ç§å­è¯åˆ—è¡¨ |

**æ”¯æŒçš„CSVæ ¼å¼**:
- SEMrushæ ¼å¼ (`merged_keywords_all.csv`)
- èšç±»ç»“æœæ ¼å¼ (`stageA_clusters.csv`)

### 3. æ•°æ®åº“é…ç½®ä¿®å¤

**é—®é¢˜**: åŸæœ¬ `product.py` å’Œ `database.py` å„è‡ªå®šä¹‰äº†ç‹¬ç«‹çš„ `Base`ï¼Œå¯¼è‡´æ¨¡å‹æ— æ³•æ­£ç¡®æ³¨å†Œåˆ°æ•°æ®åº“å¼•æ“ã€‚

**è§£å†³æ–¹æ¡ˆ**:
1. ç»Ÿä¸€ä½¿ç”¨ `backend/database.py` ä¸­çš„ `Base`
2. æ›´æ–° `product.py` ä» `database.py` å¯¼å…¥ `Base`
3. æ›´æ–° `keyword.py` ä» `database.py` å¯¼å…¥ `Base`
4. åœ¨ `init_db()` ä¸­å¯¼å…¥æ‰€æœ‰æ¨¡å‹

```python
# backend/database.py
def init_db():
    """åˆå§‹åŒ–æ•°æ®åº“ï¼Œåˆ›å»ºæ‰€æœ‰è¡¨"""
    from backend.models.product import Product
    from backend.models.keyword import Keyword, ClusterSummary
    Base.metadata.create_all(bind=engine)
    print("Database initialized successfully")
```

### 4. ä¸»åº”ç”¨æ›´æ–°

#### backend/main.py

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from backend.database import init_db
from backend.routers import products, keywords

app = FastAPI(
    title="éœ€æ±‚æŒ–æ˜ç³»ç»Ÿ API",
    description="ç»Ÿä¸€çš„éœ€æ±‚æŒ–æ˜ä¸åˆ†æå¹³å°ï¼ŒåŒ…å«è¯æ ¹èšç±»å’Œå•†å“ç®¡ç†åŠŸèƒ½",
    version="2.0.0"
)

# é…ç½® CORS
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# æ³¨å†Œè·¯ç”±
app.include_router(keywords.router)  # è¯æ ¹èšç±»æ¨¡å—
app.include_router(products.router)  # å•†å“ç®¡ç†æ¨¡å—

@app.on_event("startup")
async def startup_event():
    """åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–æ•°æ®åº“"""
    init_db()
    print("Database initialized successfully")
    print("Application started successfully")
    print("=" * 50)
    print("éœ€æ±‚æŒ–æ˜ç³»ç»Ÿ v2.0")
    print("åŒ…å«æ¨¡å—ï¼š")
    print("  - è¯æ ¹èšç±»æ¨¡å—: /api/keywords/*")
    print("  - å•†å“ç®¡ç†æ¨¡å—: /api/products/*")
    print("=" * 50)
```

---

## âœ… æµ‹è¯•ç»“æœ

### åç«¯æµ‹è¯•

```bash
# å¯åŠ¨ç»Ÿä¸€åç«¯
python -m uvicorn backend.main:app --reload --port 8000
```

**æµ‹è¯•ç»“æœ**:

1. âœ… æ ¹è·¯å¾„æµ‹è¯•
```bash
curl http://127.0.0.1:8000/
# è¿”å›: {"message":"éœ€æ±‚æŒ–æ˜ç³»ç»Ÿ API","version":"2.0.0","modules":{"keywords":"è¯æ ¹èšç±»æ¨¡å—","products":"å•†å“ç®¡ç†æ¨¡å—"},"docs":"/docs"}
```

2. âœ… å•†å“ç®¡ç†æ¨¡å—æµ‹è¯•
```bash
curl http://127.0.0.1:8000/api/products/count
# è¿”å›: {"success":true,"data":{"total":345}}
```

3. âœ… è¯æ ¹èšç±»æ¨¡å—æµ‹è¯•
```bash
curl http://127.0.0.1:8000/api/keywords/count
# è¿”å›: {"success":true,"data":{"total":0}}
```

### API æ–‡æ¡£

è®¿é—® http://127.0.0.1:8000/docs å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„ API æ–‡æ¡£ï¼ˆSwagger UIï¼‰

---

## ğŸ“Š æ•°æ®è¿ç§»çŠ¶æ€

### å•†å“ç®¡ç†æ¨¡å—
- âœ… æ•°æ®åº“: `data/products.db`
- âœ… æ•°æ®è¡¨: `products`
- âœ… æ•°æ®é‡: 345 æ¡å•†å“è®°å½•
- âœ… çŠ¶æ€: å·²è¿ç§»ï¼Œæ­£å¸¸è¿è¡Œ

### è¯æ ¹èšç±»æ¨¡å—
- âœ… æ•°æ®åº“: `data/products.db`ï¼ˆç»Ÿä¸€æ•°æ®åº“ï¼‰
- âœ… æ•°æ®è¡¨: `keywords`, `cluster_summaries`
- â³ æ•°æ®é‡: 0 æ¡ï¼ˆå¾…å¯¼å…¥ï¼‰
- âœ… çŠ¶æ€: è¡¨ç»“æ„å·²åˆ›å»ºï¼Œç­‰å¾…æ•°æ®å¯¼å…¥

**å¾…å¯¼å…¥æ•°æ®**:
- `data/merged_keywords_all.csv` - 6,565 æ¡å…³é”®è¯è®°å½•
- `data/stageA_clusters.csv` - èšç±»ç»“æœæ•°æ®

---

## ğŸš€ å¯åŠ¨æ–¹å¼

### ç»Ÿä¸€å¯åŠ¨å‘½ä»¤

```bash
# 1. å¯åŠ¨åç«¯ï¼ˆç»ˆç«¯1ï¼‰
cd "D:\xiangmu\è¯æ ¹èšç±»éœ€æ±‚æŒ–æ˜"
python -m uvicorn backend.main:app --reload --port 8000

# 2. å¯åŠ¨å‰ç«¯ï¼ˆç»ˆç«¯2ï¼‰
cd frontend
npm run dev
```

### è®¿é—®åœ°å€

- **å‰ç«¯ç•Œé¢**: http://localhost:5173
- **åç«¯ API**: http://127.0.0.1:8000
- **API æ–‡æ¡£**: http://127.0.0.1:8000/docs

---

## ğŸ“ ä»£ç å˜æ›´æ¸…å•

### æ–°å¢æ–‡ä»¶
1. `backend/models/keyword.py` - å…³é”®è¯æ•°æ®æ¨¡å‹
2. `backend/routers/keywords.py` - è¯æ ¹èšç±»APIè·¯ç”±
3. `docs/é¡¹ç›®åˆå¹¶å®Œæˆæ€»ç»“.md` - æœ¬æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶
1. `backend/main.py` - æ³¨å†Œkeywordsè·¯ç”±ï¼Œæ›´æ–°ç‰ˆæœ¬å·
2. `backend/database.py` - å¯¼å…¥æ–°æ¨¡å‹
3. `backend/models/product.py` - ç»Ÿä¸€Baseå¯¼å…¥
4. `backend/models/__init__.py` - å¯¼å‡ºæ–°æ¨¡å‹
5. `backend/routers/__init__.py` - å¯¼å‡ºkeywordsè·¯ç”±

### åˆ é™¤æ–‡ä»¶
æ— 

---

## ğŸ¯ ä¸‹ä¸€æ­¥å·¥ä½œ

### 1. æ•°æ®å¯¼å…¥ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
- [ ] å¯¼å…¥ `merged_keywords_all.csv` åˆ° keywords è¡¨
- [ ] å¯¼å…¥ `stageA_clusters.csv` èšç±»ç»“æœ
- [ ] éªŒè¯æ•°æ®å®Œæ•´æ€§

### 2. å‰ç«¯å¼€å‘ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
- [ ] åˆ›å»ºè¯æ ¹èšç±»æ¨¡å—å‰ç«¯é¡µé¢
- [ ] åˆ›å»ºå•†å“ç®¡ç†æ¨¡å—å‰ç«¯é¡µé¢
- [ ] æ›´æ–°å‰ç«¯è·¯ç”±é…ç½®
- [ ] å®ç°æ¨¡å—é—´å¯¼èˆª

### 3. åŠŸèƒ½å®Œå–„ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰
- [ ] å®ç°å…³é”®è¯æœç´¢å’Œç­›é€‰
- [ ] å®ç°ç°‡å¯è§†åŒ–
- [ ] å®ç°æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†

### 4. æ–‡æ¡£æ›´æ–°ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰
- [ ] æ›´æ–° README.md
- [ ] æ›´æ–°å¿«é€Ÿå¼€å§‹æŒ‡å—
- [ ] åˆ›å»º API ä½¿ç”¨æ–‡æ¡£
- [ ] åˆ›å»ºéƒ¨ç½²æ–‡æ¡£

---

## ğŸ” æŠ€æœ¯å€ºåŠ¡

### å·²è§£å†³
1. âœ… Base ç±»é‡å¤å®šä¹‰é—®é¢˜
2. âœ… æ•°æ®åº“è¡¨åˆ›å»ºé—®é¢˜
3. âœ… è·¯ç”±æ³¨å†Œé—®é¢˜

### å¾…è§£å†³
1. â³ å‰ç«¯æ¨¡å—åŒ–æ¶æ„è®¾è®¡
2. â³ æ•°æ®å¯¼å…¥æ€§èƒ½ä¼˜åŒ–
3. â³ API é”™è¯¯å¤„ç†å®Œå–„
4. â³ å•å…ƒæµ‹è¯•è¦†ç›–

---

## ğŸ“ˆ ç³»ç»Ÿæ¶æ„å›¾

```
éœ€æ±‚æŒ–æ˜ç³»ç»Ÿ v2.0
â”‚
â”œâ”€â”€ å‰ç«¯ (Vue 3)
â”‚   â”œâ”€â”€ è¯æ ¹èšç±»æ¨¡å—
â”‚   â””â”€â”€ å•†å“ç®¡ç†æ¨¡å—
â”‚
â”œâ”€â”€ åç«¯ (FastAPI)
â”‚   â”œâ”€â”€ /api/keywords/*  (è¯æ ¹èšç±»API)
â”‚   â””â”€â”€ /api/products/*  (å•†å“ç®¡ç†API)
â”‚
â””â”€â”€ æ•°æ®åº“ (SQLite)
    â”œâ”€â”€ keywords è¡¨
    â”œâ”€â”€ cluster_summaries è¡¨
    â””â”€â”€ products è¡¨
```

---

## ğŸ‰ åˆå¹¶æˆæœ

### æŠ€æœ¯æˆæœ
1. âœ… æˆåŠŸå°†ä¸¤ä¸ªç‹¬ç«‹ç³»ç»Ÿåˆå¹¶ä¸ºç»Ÿä¸€å¹³å°
2. âœ… å®ç°äº†æ¨¡å—åŒ–çš„ä»£ç ç»„ç»‡
3. âœ… ç»Ÿä¸€äº†æ•°æ®åº“æ¶æ„
4. âœ… åˆ›å»ºäº†å®Œæ•´çš„ API æ¥å£
5. âœ… ä¿æŒäº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§

### ä¸šåŠ¡ä»·å€¼
1. âœ… ç»Ÿä¸€çš„ç”¨æˆ·ä½“éªŒ
2. âœ… æ•°æ®äº’é€šäº’è”
3. âœ… é™ä½ç»´æŠ¤æˆæœ¬
4. âœ… ä¾¿äºåŠŸèƒ½æ‰©å±•
5. âœ… æé«˜å¼€å‘æ•ˆç‡

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- é¡¹ç›®æ–‡æ¡£: `docs/`
- API æ–‡æ¡£: http://127.0.0.1:8000/docs
- å¿«é€Ÿå¼€å§‹: `docs/04_å¿«é€Ÿå¼€å§‹æŒ‡å—.md`

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-01-27
**ç”Ÿæˆå·¥å…·**: Claude Sonnet 4.5
**é¡¹ç›®ç‰ˆæœ¬**: v2.0.0
