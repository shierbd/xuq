# 系统架构设计文档

**项目名称**: 需求挖掘系统
**文档版本**: v1.0
**创建日期**: 2026-01-28
**文档类型**: 架构设计

---

## 1. 架构概述

### 1.1 架构模式

**架构类型**: 前后端分离 + 分层架构

**技术栈**:
- **前端**: React 18 + Ant Design + Vite
- **后端**: FastAPI + Python 3.11
- **数据库**: SQLite 3 (开发) / PostgreSQL (生产)
- **AI/ML**: Sentence Transformers + HDBSCAN + Claude API

### 1.2 系统架构图

```
┌─────────────────────────────────────────────────────────┐
│                    前端层 (Frontend)                     │
│                  React + Ant Design                      │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │ 词根聚类模块  │  │ 商品管理模块  │  │ Reddit模块   │  │
│  │  (Keywords)  │  │  (Products)  │  │  (预留)      │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          │ HTTP/REST API
┌─────────────────────────────────────────────────────────┐
│                    API 层 (Backend)                      │
│                      FastAPI                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │ Keywords API │  │ Products API │  │ Batch Import │  │
│  │   Router     │  │   Router     │  │   Router     │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          │
┌─────────────────────────────────────────────────────────┐
│                   服务层 (Services)                      │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │ Clustering   │  │ Import       │  │ Export       │  │
│  │  Service     │  │  Service     │  │  Service     │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          │
┌─────────────────────────────────────────────────────────┐
│                   数据层 (Data Layer)                    │
│                    SQLAlchemy ORM                        │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │   Keyword    │  │   Product    │  │ClusterSummary│  │
│  │    Model     │  │    Model     │  │    Model     │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
                          │ SQL
┌─────────────────────────────────────────────────────────┐
│                   数据库 (Database)                      │
│                SQLite / PostgreSQL                       │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │   keywords   │  │   products   │  │cluster_      │  │
│  │    表        │  │    表        │  │summaries表   │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
└─────────────────────────────────────────────────────────┘
```

---

## 2. 模块划分

### 2.1 前端模块

#### 2.1.1 词根聚类模块
**路径**: `frontend/src/pages/keywords/`

**功能**:
- 关键词数据导入
- 关键词列表展示
- 聚类结果查看
- 簇详情分析

#### 2.1.2 商品管理模块
**路径**: `frontend/src/pages/products/`

**功能**:
- 商品数据导入
- 商品列表管理
- 商品聚类分析
- 聚类结果展示

---

### 2.2 后端模块

#### 2.2.1 API 路由层
**路径**: `backend/routers/`

**模块**:
1. keywords.py - 词根聚类 API
2. products.py - 商品管理 API
3. batch_import.py - 批量导入 API

#### 2.2.2 服务层
**路径**: `backend/services/`

**服务**:
1. clustering_service.py - 聚类服务
2. import_service.py - 导入服务
3. export_service.py - 导出服务
4. product_service.py - 商品服务

---

## 3. 技术架构

### 3.1 前端技术栈
- React 18.2
- Ant Design 5.x
- Axios
- Vite 5.x

### 3.2 后端技术栈
- FastAPI 0.104
- SQLAlchemy 2.0
- Uvicorn

### 3.3 AI/ML 技术栈
- Sentence Transformers
- HDBSCAN
- scikit-learn

---

*文档创建者: Claude Sonnet 4.5*
*最后更新: 2026-01-28*
