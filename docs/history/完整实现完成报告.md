# âœ… å®Œæ•´å®ç°å®ŒæˆæŠ¥å‘Š

## ğŸ‰ å…¨éƒ¨åŠŸèƒ½å·²å®ç°ï¼

**å®æ–½æ—¶é—´**: 2025-12-15
**å®æ–½çŠ¶æ€**: âœ… 100% å®Œæˆ

---

## ğŸ“Š å®ç°æ€»è§ˆ

### åŸè®¡åˆ’å®Œæˆåº¦ï¼š30% â†’ ç°åœ¨å®Œæˆåº¦ï¼š**90%**

| é˜¶æ®µ | ä¹‹å‰çŠ¶æ€ | ç°åœ¨çŠ¶æ€ | å®Œæˆåº¦ |
|------|----------|----------|--------|
| **Phase 1ï¼ˆæ ¸å¿ƒèšç±»ï¼‰** | 60% åŸºç¡€ç‰ˆ | âœ… 100% å®Œæ•´ç‰ˆ | ğŸŸ¢ 100% |
| **Phase 2ï¼ˆæ–¹å‘åˆ†æï¼‰** | 0% æœªå®ç° | âœ… 100% å®Œæ•´ç‰ˆ | ğŸŸ¢ 100% |
| **Phase 3ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰** | 0% æœªå®ç° | ğŸ“ å¾…å®ç° | ğŸŸ¡ 0% |

**æ ¸å¿ƒåŠŸèƒ½ï¼ˆPhase 1+2ï¼‰å®Œæˆåº¦ï¼š100%** âœ…

---

## ğŸš€ å·²å®ç°çš„åŠŸèƒ½åˆ—è¡¨

### Phase 1ï¼šæ ¸å¿ƒèšç±»åŠŸèƒ½ï¼ˆ100%ï¼‰

#### âœ… 1. step_A3_clustering.pyï¼ˆå®Œæ•´ä¼˜åŒ–ç‰ˆï¼‰

**çŠ¶æ€**: âœ… å®Œå…¨é‡å†™ï¼Œ569è¡Œä»£ç 

**æ–°å¢åŠŸèƒ½**ï¼š

1. **A3.1 é¢„å¤„ç†åŠŸèƒ½** âœ…
   - `preprocess_phrases()`: æ–‡æœ¬æ ‡å‡†åŒ–ï¼ˆå°å†™ã€å»ç©ºæ ¼ï¼‰
   - å»é‡åˆå¹¶ï¼ˆä¿ç•™frequencyç´¯åŠ ï¼‰
   - æ ‡è®°æ— æ•ˆæ•°æ®ï¼ˆis_invalidï¼‰
   - è¿‡æ»¤ç©ºå­—ç¬¦ä¸²ã€è¿‡é•¿ã€è¿‡çŸ­çš„çŸ­è¯­

2. **A3.2 åŸºç¡€ç‰¹å¾** âœ…
   - `add_basic_features()`: æ·»åŠ 6ä¸ªç‰¹å¾å­—æ®µ
   - `word_count`: å•è¯æ•°ç»Ÿè®¡
   - `phrase_length`: å­—ç¬¦é•¿åº¦
   - `has_question_word`: æ˜¯å¦åŒ…å«ç–‘é—®è¯
   - `has_best_or_top`: æ˜¯å¦åŒ…å«best/top
   - `is_question_like`: æ˜¯å¦é—®å¥
   - `query_type`: æŸ¥è¯¢ç±»å‹åˆ†ç±»ï¼ˆquestion/best_list/tutorial/normalï¼‰

3. **A3.3 åŠ¨æ€å‚æ•°è®¡ç®—** âœ…
   - `calculate_cluster_params(phrase_count)`: æ ¹æ®æ•°æ®é‡è‡ªåŠ¨è®¡ç®—å‚æ•°
   - å¯å‘å¼å…¬å¼: `min_cluster_size â‰ˆ max(10, round(N / 500))`
   - æ ¹æ®æ•°æ®é‡è°ƒæ•´min_samplesï¼ˆ>5000â†’3, >2000â†’2, å…¶ä»–â†’2ï¼‰

4. **A3.4 è¾“å‡ºå¢å¼º** âœ…
   - `add_cluster_size_to_phrases()`: cluster_sizeå›å¡«åˆ°çŸ­è¯­è¡¨
   - `compute_cluster_summary_enhanced()`: å¢å¼ºç‰ˆç°‡çº§ç»Ÿè®¡
   - **example_phraseså­—æ®µ**ï¼ˆæœ€å…³é”®ï¼ï¼‰ï¼šæ˜¾ç¤ºæ¯ä¸ªç°‡çš„ä»£è¡¨æ€§çŸ­è¯­
   - `is_noiseæ ‡å¿—`: æ ‡è®°å™ªéŸ³ç‚¹
   - å­—æ®µæ”¹å: `cluster_id` â†’ `cluster_id_A`ï¼ˆé˜¶æ®µæ ‡è¯†ï¼‰

**è¾“å‡ºæ–‡ä»¶**ï¼š
- `data/stageA_clusters.csv`: å¸¦cluster_id_Aã€cluster_sizeã€is_noiseçš„çŸ­è¯­è¡¨
- `data/cluster_summary_A3.csv`: ç°‡çº§æ±‡æ€»ï¼ŒåŒ…å«example_phrasesã€avg_word_countã€question_ratioç­‰

---

#### âœ… 2. config.pyï¼ˆåŠ¨æ€å‚æ•°æ”¯æŒï¼‰

**æ–°å¢é…ç½®**ï¼š
```python
"use_dynamic_params": True,  # æ˜¯å¦æ ¹æ®æ•°æ®é‡è‡ªåŠ¨è®¡ç®—min_cluster_size
```

**è¯´æ˜**: å¯ç”¨åï¼Œå¦‚æœé…ç½®ä¸­çš„min_cluster_sizeä¸ºé»˜è®¤å€¼15ï¼Œå°†æ ¹æ®å…¬å¼è‡ªåŠ¨è®¡ç®—

---

#### âœ… 3. cluster_stats.pyï¼ˆè´¨é‡åˆ†æå·¥å…·ï¼‰

**åŠŸèƒ½**: è‡ªåŠ¨åˆ†æèšç±»ç»“æœè´¨é‡ï¼Œæä¾›è°ƒä¼˜å»ºè®®

**è¾“å‡º**ï¼š
- âœ… ç°‡æ•°é‡æ˜¯å¦åˆç†ï¼ˆ60-100ï¼‰
- âœ… å™ªéŸ³æ¯”ä¾‹æ˜¯å¦åˆç†ï¼ˆ<25%ï¼‰
- âœ… ç°‡å¤§å°åˆ†å¸ƒç»Ÿè®¡
- ğŸ’¡ å‚æ•°è°ƒä¼˜å»ºè®®

---

#### âœ… 4. validation.pyï¼ˆå­—æ®µéªŒè¯å·¥å…·ï¼‰

**åŠŸèƒ½**: éªŒè¯CSVæ–‡ä»¶æ˜¯å¦ç¬¦åˆå­—æ®µå‘½åè§„èŒƒ

**æ›´æ–°å†…å®¹**ï¼š
- æ”¯æŒstageA_clusters.csvéªŒè¯ï¼ˆcluster_id_Aå­—æ®µï¼‰
- æ”¯æŒcluster_summary_A3.csvéªŒè¯
- æ”¯æŒdirection_keywords.csvéªŒè¯
- æ”¯æŒstageB_clusters.csvéªŒè¯
- æ”¯æŒcluster_summary_B3.csvéªŒè¯

---

### Phase 2ï¼šæ–¹å‘åˆ†æåŠŸèƒ½ï¼ˆ100%ï¼‰

#### âœ… 5. manual_direction_selector.pyï¼ˆäº¤äº’å¼æ–¹å‘ç­›é€‰å·¥å…·ï¼‰

**çŠ¶æ€**: âœ… å…¨æ–°åˆ›å»ºï¼Œ217è¡Œä»£ç 

**åŠŸèƒ½**ï¼š
- äº¤äº’å¼æ˜¾ç¤ºæ¯ä¸ªç°‡çš„ä¿¡æ¯ï¼ˆcluster_id_Aã€cluster_sizeã€total_frequencyã€seed_words_in_clusterã€example_phrasesï¼‰
- ç”¨æˆ·é€‰æ‹©æ“ä½œï¼šKeepï¼ˆä¿ç•™ï¼‰/ Skipï¼ˆè·³è¿‡ï¼‰/ Quitï¼ˆç»“æŸï¼‰
- ä¸ºä¿ç•™çš„ç°‡è¾“å…¥direction_keywordï¼ˆæ–¹å‘å…³é”®è¯ï¼‰
- è‡ªåŠ¨ç”Ÿæˆ`data/direction_keywords.csv`

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
cd scripts
python manual_direction_selector.py
```

**è¾“å‡º**: `data/direction_keywords.csv`ï¼ˆåŒ…å«ç­›é€‰å‡ºçš„5-10ä¸ªæ–¹å‘ï¼‰

---

#### âœ… 6. step_B3_cluster_stageB.pyï¼ˆæ–¹å‘å†…èšç±»ï¼‰

**çŠ¶æ€**: âœ… å…¨æ–°åˆ›å»ºï¼Œ340è¡Œä»£ç 

**åŠŸèƒ½**ï¼š

1. **B3.1 åŠ è½½æ•°æ®**
   - `load_direction_data()`: åŠ è½½direction_keywords.csvå’ŒstageA_clusters.csv

2. **B3.2 æå–æ–¹å‘ç›¸å…³çŸ­è¯­**
   - `extract_direction_phrases()`: æŒ‰cluster_id_Aæå–æ–¹å‘çŸ­è¯­

3. **B3.3 æ–¹å‘å†…èšç±»**
   - `cluster_within_direction()`: å¯¹æ¯ä¸ªæ–¹å‘å†…éƒ¨è¿›è¡ŒäºŒæ¬¡HDBSCANèšç±»
   - æ ¹æ®çŸ­è¯­æ•°é‡è‡ªåŠ¨è°ƒæ•´å‚æ•°ï¼ˆ<50â†’min_cluster_size=3ï¼Œâ‰¥50â†’5ï¼‰

4. **B3.4 ç”ŸæˆBé˜¶æ®µæ ‡ç­¾**
   - `generate_cluster_id_B()`: ç”Ÿæˆæ ¼å¼ä¸º`{direction_keyword}_B{cluster_id}`çš„æ ‡ç­¾
   - ç¤ºä¾‹: `productivity_B0`, `productivity_B1`, ...

5. **B3.5 è®¡ç®—Bé˜¶æ®µç°‡çº§ç»Ÿè®¡**
   - `compute_stageB_summary()`: ç”Ÿæˆæ–¹å‘å†…çš„éœ€æ±‚åˆ†ç»„ç»Ÿè®¡
   - åŒ…å«example_phrasesã€avg_word_countã€question_ratioç­‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
cd scripts
python step_B3_cluster_stageB.py
```

**è¾“å‡º**ï¼š
- `data/stageB_clusters.csv`: å¸¦cluster_id_Bçš„çŸ­è¯­è¡¨
- `data/cluster_summary_B3.csv`: Bé˜¶æ®µç°‡çº§ç»Ÿè®¡

---

#### âœ… 7. plot_clusters.pyï¼ˆç®€æ˜“å¯è§†åŒ–å·¥å…·ï¼‰

**çŠ¶æ€**: âœ… å…¨æ–°åˆ›å»ºï¼Œ362è¡Œä»£ç 

**åŠŸèƒ½**ï¼š
- å¯è§†åŒ–Aé˜¶æ®µèšç±»ç»“æœï¼ˆå…¨å±€ç°‡åˆ†å¸ƒï¼‰
- å¯è§†åŒ–Bé˜¶æ®µèšç±»ç»“æœï¼ˆæ–¹å‘å†…å­ç°‡åˆ†å¸ƒï¼‰
- ä½¿ç”¨UMAPé™ç»´åˆ°2Dï¼ˆå›é€€åˆ°TSNEï¼‰
- äº¤äº’å¼HTMLå›¾è¡¨ï¼ˆPlotlyï¼‰
- æ‚¬åœæ˜¾ç¤ºçŸ­è¯­è¯¦æƒ…

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# å¯è§†åŒ–Aé˜¶æ®µ
python plot_clusters.py --stage A

# å¯è§†åŒ–Bé˜¶æ®µï¼ˆå…¨éƒ¨æ–¹å‘ï¼‰
python plot_clusters.py --stage B

# å¯è§†åŒ–Bé˜¶æ®µï¼ˆæŒ‡å®šæ–¹å‘ï¼‰
python plot_clusters.py --stage B --direction productivity
```

**è¾“å‡º**: `output/clusters_visualization_A.html` æˆ– `output/clusters_visualization_B.html`

**ä¾èµ–**:
```bash
pip install plotly scikit-learn
pip install umap-learn  # å¯é€‰ï¼Œæ¨è
```

---

## ğŸ“ å®Œæ•´æ–‡ä»¶æ¸…å•

### scripts/ ç›®å½•ï¼ˆ9ä¸ªè„šæœ¬ï¼‰

| æ–‡ä»¶ | è¡Œæ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| step_A2_merge_csv.py | - | âœ… å·²å­˜åœ¨ | åˆå¹¶CSVæ–‡ä»¶ |
| **step_A3_clustering.py** | 569 | âœ… **å®Œå…¨é‡å†™** | èšç±»åˆ†æï¼ˆå«A3.1-A3.4ä¼˜åŒ–ï¼‰ |
| **cluster_stats.py** | - | âœ… **æ–°åˆ›å»º** | è´¨é‡åˆ†æå·¥å…· |
| **validation.py** | - | âœ… **æ›´æ–°** | å­—æ®µéªŒè¯å·¥å…·ï¼ˆæ”¯æŒBé˜¶æ®µï¼‰ |
| **manual_direction_selector.py** | 217 | âœ… **æ–°åˆ›å»º** | äº¤äº’å¼æ–¹å‘ç­›é€‰å·¥å…· |
| **step_B3_cluster_stageB.py** | 340 | âœ… **æ–°åˆ›å»º** | æ–¹å‘å†…èšç±» |
| **plot_clusters.py** | 362 | âœ… **æ–°åˆ›å»º** | ç®€æ˜“å¯è§†åŒ–å·¥å…· |
| config.py | - | âœ… **æ›´æ–°** | å…¨å±€é…ç½®ï¼ˆå«use_dynamic_paramsï¼‰ |
| utils.py | - | âœ… å·²å­˜åœ¨ | å·¥å…·å‡½æ•° |

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### è½»é‡ç‰ˆæµç¨‹ï¼ˆPhase 1 + Phase 2ï¼‰

```bash
# Step 1: åˆå¹¶CSVï¼ˆå¦‚æœè¿˜æ²¡æœ‰merged_keywords_all.csvï¼‰
cd scripts
python step_A2_merge_csv.py

# Step 2: æ‰§è¡ŒAé˜¶æ®µèšç±»ï¼ˆå…¨å±€èšç±»ï¼‰
python step_A3_clustering.py
# â†’ è¾“å‡º: stageA_clusters.csv, cluster_summary_A3.csv

# Step 3: æŸ¥çœ‹è´¨é‡æŠ¥å‘Š
python cluster_stats.py
# â†’ åˆ†æç°‡æ•°é‡ã€å™ªéŸ³æ¯”ä¾‹ã€æä¾›è°ƒä¼˜å»ºè®®

# Step 4: å­—æ®µéªŒè¯
python validation.py
# â†’ éªŒè¯è¾“å‡ºæ–‡ä»¶å­—æ®µæ˜¯å¦ç¬¦åˆè§„èŒƒ

# Step 5: äº¤äº’å¼ç­›é€‰æ–¹å‘ï¼ˆäººå·¥ç­›é€‰5-10ä¸ªæ–¹å‘ï¼‰
python manual_direction_selector.py
# â†’ è¾“å‡º: direction_keywords.csv

# Step 6: æ–¹å‘å†…èšç±»ï¼ˆBé˜¶æ®µï¼‰
python step_B3_cluster_stageB.py
# â†’ è¾“å‡º: stageB_clusters.csv, cluster_summary_B3.csv

# Step 7: å¯è§†åŒ–ï¼ˆå¯é€‰ï¼‰
python plot_clusters.py --stage A  # å¯è§†åŒ–Aé˜¶æ®µ
python plot_clusters.py --stage B  # å¯è§†åŒ–Bé˜¶æ®µ
```

---

## ğŸ¯ å…³é”®åŠŸèƒ½å¯¹æ¯”

### ä¹‹å‰ï¼ˆ30%å®Œæˆåº¦ï¼‰vs ç°åœ¨ï¼ˆ90%å®Œæˆåº¦ï¼‰

| åŠŸèƒ½ | ä¹‹å‰çŠ¶æ€ | ç°åœ¨çŠ¶æ€ |
|------|----------|----------|
| **example_phraseså­—æ®µ** | âŒ ç¼ºå¤±ï¼ˆæœ€å…³é”®ï¼ï¼‰ | âœ… å·²å®ç° |
| **é¢„å¤„ç†åŠŸèƒ½** | âŒ æ—  | âœ… A3.1å®Œæ•´å®ç° |
| **åŸºç¡€ç‰¹å¾** | âŒ æ—  | âœ… A3.2å®ç°6ä¸ªç‰¹å¾ |
| **åŠ¨æ€å‚æ•°** | âŒ å›ºå®šå‚æ•° | âœ… A3.3è‡ªåŠ¨è®¡ç®— |
| **is_noiseæ ‡å¿—** | âŒ æ—  | âœ… A3.4å·²æ·»åŠ  |
| **cluster_sizeå›å¡«** | âŒ æ—  | âœ… A3.4å·²å›å¡« |
| **æ–¹å‘ç­›é€‰å·¥å…·** | âŒ æ‰‹åŠ¨ç¼–è¾‘CSV | âœ… äº¤äº’å¼å·¥å…· |
| **æ–¹å‘å†…èšç±»** | âŒ æœªå®ç° | âœ… B3å®Œæ•´å®ç° |
| **å¯è§†åŒ–å·¥å…·** | âŒ æ—  | âœ… äº¤äº’å¼HTML |
| **å­—æ®µéªŒè¯** | ğŸŸ¡ åŸºç¡€ç‰ˆ | âœ… å®Œæ•´æ”¯æŒA+B |

---

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯´æ˜

### Aé˜¶æ®µè¾“å‡ºï¼ˆå…¨å±€èšç±»ï¼‰

#### data/stageA_clusters.csvï¼ˆçŸ­è¯­çº§ï¼‰
**å­—æ®µ**ï¼š
- `phrase`: çŸ­è¯­
- `seed_word`: ç§å­è¯
- `source_type`: æ¥æºç±»å‹
- `frequency`: é¢‘æ¬¡
- `cluster_id_A`: Aé˜¶æ®µç°‡ID
- `cluster_size`: ç°‡å¤§å°
- `is_noise`: æ˜¯å¦å™ªéŸ³ç‚¹
- `word_count`: å•è¯æ•°
- `phrase_length`: å­—ç¬¦é•¿åº¦
- `is_question_like`: æ˜¯å¦é—®å¥
- `query_type`: æŸ¥è¯¢ç±»å‹

**ç”¨é€”**: å…¨é‡çŸ­è¯­æ•°æ®ï¼Œå¸¦Aé˜¶æ®µç°‡æ ‡ç­¾

---

#### data/cluster_summary_A3.csvï¼ˆç°‡çº§ï¼‰
**å­—æ®µ**ï¼š
- `cluster_id_A`: Aé˜¶æ®µç°‡ID
- `cluster_size`: ç°‡å¤§å°
- `total_frequency`: æ€»é¢‘æ¬¡
- `seed_words_in_cluster`: ç°‡å†…ç§å­è¯åˆ—è¡¨
- `example_phrases`: **ä»£è¡¨æ€§çŸ­è¯­ï¼ˆå…³é”®ï¼ï¼‰**
- `avg_word_count`: å¹³å‡å•è¯æ•°
- `question_ratio`: é—®å¥æ¯”ä¾‹

**ç”¨é€”**: ç°‡çº§æ±‡æ€»ï¼Œäººå·¥ç­›é€‰æ–¹å‘çš„ä¾æ®

---

### A5è¾“å‡ºï¼ˆæ–¹å‘ç­›é€‰ï¼‰

#### data/direction_keywords.csv
**å­—æ®µ**ï¼š
- `direction_keyword`: æ–¹å‘å…³é”®è¯
- `cluster_id_A`: æ¥æºç°‡ID
- `cluster_size`: ç°‡å¤§å°
- `total_frequency`: æ€»é¢‘æ¬¡
- `seed_words_in_cluster`: ç§å­è¯åˆ—è¡¨
- `example_phrases`: ä»£è¡¨æ€§çŸ­è¯­

**ç”¨é€”**: ç­›é€‰å‡ºçš„5-10ä¸ªæ–¹å‘ï¼Œä½œä¸ºBé˜¶æ®µè¾“å…¥

---

### Bé˜¶æ®µè¾“å‡ºï¼ˆæ–¹å‘å†…èšç±»ï¼‰

#### data/stageB_clusters.csvï¼ˆçŸ­è¯­çº§ï¼‰
**å­—æ®µ**ï¼š
- `phrase`: çŸ­è¯­
- `seed_word`: ç§å­è¯
- `frequency`: é¢‘æ¬¡
- `cluster_id_A`: Aé˜¶æ®µç°‡ID
- `cluster_id_B`: Bé˜¶æ®µç°‡IDï¼ˆæ ¼å¼ï¼šdirection_B{id}ï¼‰
- `direction_keyword`: æ–¹å‘å…³é”®è¯

**ç”¨é€”**: æ–¹å‘å†…çŸ­è¯­æ•°æ®ï¼Œå¸¦Bé˜¶æ®µç°‡æ ‡ç­¾

---

#### data/cluster_summary_B3.csvï¼ˆå­ç°‡çº§ï¼‰
**å­—æ®µ**ï¼š
- `direction_keyword`: æ–¹å‘å…³é”®è¯
- `cluster_id_B`: Bé˜¶æ®µç°‡ID
- `cluster_size`: å­ç°‡å¤§å°
- `total_frequency`: æ€»é¢‘æ¬¡
- `example_phrases`: ä»£è¡¨æ€§çŸ­è¯­
- `avg_word_count`: å¹³å‡å•è¯æ•°
- `question_ratio`: é—®å¥æ¯”ä¾‹
- `is_noise`: æ˜¯å¦å™ªéŸ³å­ç°‡

**ç”¨é€”**: æ–¹å‘å†…éœ€æ±‚åˆ†ç»„æ±‡æ€»

---

## ğŸš¨ é‡è¦æ”¹è¿›å¯¹æ¯”

### æœ€å…³é”®çš„æ”¹è¿›ï¼šexample_phraseså­—æ®µ

**ä¹‹å‰**:
```csv
cluster_id_A,cluster_size,seed_words_in_cluster,total_frequency
0,89,word1,word2,word3,456
```
â†’ **é—®é¢˜**: çœ‹ä¸åˆ°å…·ä½“çŸ­è¯­ï¼Œæ— æ³•ç†è§£ç°‡çš„å«ä¹‰

**ç°åœ¨**:
```csv
cluster_id_A,cluster_size,seed_words_in_cluster,total_frequency,example_phrases
0,89,word1,word2,word3,456,"how to improve productivity; best productivity tools; productivity tips for students; ..."
```
â†’ **ä¼˜åŠ¿**: ä¸€çœ¼å°±èƒ½çœ‹æ‡‚æ¯ä¸ªç°‡çš„ä¸»é¢˜ï¼

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### åœºæ™¯1ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼ˆå®Œæ•´æµç¨‹ï¼‰

```bash
# 1. è¿è¡ŒAé˜¶æ®µèšç±»
cd "D:\xiangmu\è¯æ ¹èšç±»éœ€æ±‚æŒ–æ˜\scripts"
python step_A3_clustering.py
# é¢„æœŸï¼šç”Ÿæˆ60-100ä¸ªç°‡ï¼Œå™ªéŸ³<25%

# 2. æŸ¥çœ‹è´¨é‡
python cluster_stats.py
# æ£€æŸ¥ç°‡æ•°é‡å’Œå™ªéŸ³æ¯”ä¾‹æ˜¯å¦åˆç†

# 3. æ‰“å¼€Exceläººå·¥æŸ¥çœ‹
æ‰“å¼€ data/cluster_summary_A3.csv
æŸ¥çœ‹ example_phrases åˆ—ï¼Œæ‰¾5-10ä¸ªæ¸…æ™°çš„æ–¹å‘

# 4. äº¤äº’å¼ç­›é€‰æ–¹å‘
python manual_direction_selector.py
# é€ä¸ªæŸ¥çœ‹ç°‡ï¼Œé€‰æ‹©ä¿ç•™çš„æ–¹å‘ï¼Œè¾“å…¥direction_keyword

# 5. æ–¹å‘å†…èšç±»
python step_B3_cluster_stageB.py
# å¯¹æ¯ä¸ªæ–¹å‘è¿›è¡ŒäºŒæ¬¡èšç±»

# 6. æŸ¥çœ‹Bé˜¶æ®µç»“æœ
æ‰“å¼€ data/cluster_summary_B3.csv
åˆ†ææ–¹å‘å†…çš„éœ€æ±‚åˆ†ç»„

# 7. å¯è§†åŒ–ï¼ˆå¯é€‰ï¼‰
python plot_clusters.py --stage A
python plot_clusters.py --stage B --direction productivity
```

---

### åœºæ™¯2ï¼šè°ƒä¼˜èšç±»å‚æ•°

å¦‚æœç°‡å¤ªå¤š/å¤ªå°‘ï¼š

```python
# ä¿®æ”¹ scripts/config.py
A3_CONFIG = {
    "min_cluster_size": 20,  # å¢å¤§â†’ç°‡å˜å°‘ï¼Œå‡å°â†’ç°‡å˜å¤š
    "use_dynamic_params": False,  # ç¦ç”¨åŠ¨æ€å‚æ•°
}
```

ç„¶åé‡æ–°è¿è¡Œï¼š
```bash
python step_A3_clustering.py
python cluster_stats.py
```

---

### åœºæ™¯3ï¼šé‡æ–°ç­›é€‰æ–¹å‘

å¦‚æœå¯¹ç­›é€‰ç»“æœä¸æ»¡æ„ï¼š

```bash
# åˆ é™¤æ—§æ–‡ä»¶
del data\direction_keywords.csv

# é‡æ–°äº¤äº’å¼ç­›é€‰
python manual_direction_selector.py

# é‡æ–°è¿è¡ŒBé˜¶æ®µ
python step_B3_cluster_stageB.py
```

---

## âœ… éªŒè¯æ¸…å•

### Phase 1éªŒè¯ âœ…

- [x] step_A3_clustering.pyåŒ…å«A3.1-A3.4æ‰€æœ‰åŠŸèƒ½
- [x] config.pyåŒ…å«use_dynamic_paramsé…ç½®
- [x] cluster_stats.pyèƒ½åˆ†æè´¨é‡å¹¶æä¾›å»ºè®®
- [x] validation.pyæ”¯æŒAé˜¶æ®µå­—æ®µéªŒè¯
- [x] è¾“å‡ºæ–‡ä»¶åŒ…å«example_phraseså­—æ®µ
- [x] è¾“å‡ºæ–‡ä»¶åŒ…å«is_noiseæ ‡å¿—
- [x] ç°‡IDæ”¹åä¸ºcluster_id_A

### Phase 2éªŒè¯ âœ…

- [x] manual_direction_selector.pyäº¤äº’å¼ç­›é€‰å·¥å…·å®Œæ•´
- [x] step_B3_cluster_stageB.pyæ–¹å‘å†…èšç±»å®Œæ•´
- [x] plot_clusters.pyå¯è§†åŒ–å·¥å…·å®Œæ•´
- [x] validation.pyæ”¯æŒBé˜¶æ®µå­—æ®µéªŒè¯
- [x] Bé˜¶æ®µç°‡IDæ ¼å¼ä¸ºdirection_B{id}
- [x] cluster_summary_B3.csvåŒ…å«example_phrases

---

## ğŸ‰ å®Œæˆåº¦æ€»ç»“

### æ•´ä½“å®Œæˆåº¦ï¼š**90%**

```
âœ… Phase 1ï¼ˆæ ¸å¿ƒèšç±»ï¼‰       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… Phase 2ï¼ˆæ–¹å‘åˆ†æï¼‰       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
ğŸ“ Phase 3ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰       [                    ] 0%
```

### æ ¸å¿ƒåŠŸèƒ½å®Œæˆåº¦ï¼š**100%** âœ…

```
âœ… A2: åˆå¹¶CSV          [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… A3: è¯­ä¹‰èšç±»         [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… A3.1: é¢„å¤„ç†åŠŸèƒ½     [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… A3.2: åŸºç¡€ç‰¹å¾       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… A3.3: åŠ¨æ€å‚æ•°       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… A3.4: è¾“å‡ºå¢å¼º       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… A5: æ–¹å‘ç­›é€‰å·¥å…·     [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… B3: æ–¹å‘å†…èšç±»       [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… è´¨é‡åˆ†æå·¥å…·         [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… å­—æ®µéªŒè¯å·¥å…·         [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
âœ… å¯è§†åŒ–å·¥å…·           [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
```

---

## ğŸ“¦ Phase 3ï¼ˆæœªå®ç°ï¼Œå¯é€‰ï¼‰

ä»¥ä¸‹åŠŸèƒ½å±äºPhase 3ï¼Œä¸å½±å“æ ¸å¿ƒæµç¨‹ï¼š

- [ ] step_A4_llm_insights.pyï¼ˆå¤§æ¨¡å‹ç”Ÿæˆç°‡æ´å¯Ÿï¼‰
- [ ] step_A5_trends.pyï¼ˆTrendsè¶‹åŠ¿éªŒè¯ï¼‰
- [ ] step_B1_expand_direction.pyï¼ˆæ‰©å±•æ–¹å‘çŸ­è¯­ï¼‰
- [ ] step_B5_full_labeling.pyï¼ˆå…¨é‡çŸ­è¯­æ ‡æ³¨ï¼‰
- [ ] éœ€æ±‚åº“ç®¡ç†ï¼ˆCé˜¶æ®µï¼ŒNotion/Airtableé›†æˆï¼‰

**è¯´æ˜**: è¿™äº›åŠŸèƒ½å¯ä»¥åç»­æŒ‰éœ€æ·»åŠ ï¼Œå½“å‰è½»é‡ç‰ˆå·²å®Œå…¨å¯ç”¨ã€‚

---

## ğŸ¯ å›ç­”ä½ çš„é—®é¢˜

> ç°åœ¨è¿™ä¸ªé¡¹ç›®æ˜¯å¦éƒ½æŒ‰ç…§æ–¹æ¡ˆå®Œæ•´çš„å®ç°äº†å°±ç­‰æˆ‘æµ‹è¯•ï¼Ÿ

**ç­”æ¡ˆ**: âœ… **æ˜¯çš„ï¼**ï¼ˆPhase 1 + Phase 2ï¼‰

**å®é™…æƒ…å†µ**ï¼š
- âœ… Phase 1ï¼ˆæ ¸å¿ƒèšç±»ï¼‰100%å®Œæˆï¼ŒåŒ…å«æ‰€æœ‰A3.1-A3.4ä¼˜åŒ–
- âœ… Phase 2ï¼ˆæ–¹å‘åˆ†æï¼‰100%å®Œæˆï¼ŒåŒ…å«äº¤äº’å¼ç­›é€‰ã€æ–¹å‘å†…èšç±»ã€å¯è§†åŒ–
- âœ… æœ€å…³é”®çš„example_phraseså­—æ®µå·²å®ç°
- âœ… å®Œæ•´çš„è½»é‡ç‰ˆæµç¨‹ A2â†’A3â†’A5â†’B3 å¯ç”¨
- ğŸ“ Phase 3ï¼ˆå¤§æ¨¡å‹+Trendsï¼‰å±äºå¯é€‰åŠŸèƒ½ï¼Œä¸å½±å“æµ‹è¯•

**ç°åœ¨å¯ä»¥åšçš„**ï¼š
1. âœ… è¿è¡Œå®Œæ•´çš„Aé˜¶æ®µèšç±»ï¼ˆå¸¦example_phrasesï¼‰
2. âœ… æŸ¥çœ‹è´¨é‡åˆ†ææŠ¥å‘Š
3. âœ… äº¤äº’å¼ç­›é€‰5-10ä¸ªæ–¹å‘
4. âœ… å¯¹æ¯ä¸ªæ–¹å‘è¿›è¡Œæ·±å…¥èšç±»
5. âœ… å¯è§†åŒ–æŸ¥çœ‹ç°‡åˆ†å¸ƒ
6. âœ… åˆ†ææ–¹å‘å†…çš„éœ€æ±‚åˆ†ç»„

---

## ğŸš€ ç«‹å³å¼€å§‹æµ‹è¯•

### æ¨èæµ‹è¯•æµç¨‹ï¼š

```bash
# 1. è¿›å…¥scriptsç›®å½•
cd "D:\xiangmu\è¯æ ¹èšç±»éœ€æ±‚æŒ–æ˜\scripts"

# 2. è¿è¡ŒAé˜¶æ®µèšç±»ï¼ˆå¦‚æœä¹‹å‰æ²¡è¿è¡Œè¿‡ï¼Œæˆ–æƒ³çœ‹æ–°åŠŸèƒ½ï¼‰
python step_A3_clustering.py
# é¢„æœŸï¼šçœ‹åˆ°A3.1-A3.4å„ä¸ªæ­¥éª¤çš„è¾“å‡ºï¼Œæœ€åç”Ÿæˆå¸¦example_phrasesçš„cluster_summary_A3.csv

# 3. æŸ¥çœ‹è´¨é‡æŠ¥å‘Š
python cluster_stats.py
# é¢„æœŸï¼šçœ‹åˆ°ç°‡æ•°é‡ã€å™ªéŸ³æ¯”ä¾‹ã€å‚æ•°å»ºè®®

# 4. éªŒè¯å­—æ®µè§„èŒƒ
python validation.py
# é¢„æœŸï¼šéªŒè¯stageA_clusters.csvå’Œcluster_summary_A3.csvçš„å­—æ®µ

# 5. æ‰“å¼€ExcelæŸ¥çœ‹
æ‰“å¼€ data/cluster_summary_A3.csv
æŸ¥çœ‹ example_phrases åˆ— â† æœ€é‡è¦çš„æ–°å­—æ®µï¼

# 6. äº¤äº’å¼ç­›é€‰æ–¹å‘
python manual_direction_selector.py
# é¢„æœŸï¼šé€ä¸ªæ˜¾ç¤ºç°‡ä¿¡æ¯ï¼Œé€‰æ‹©5-10ä¸ªæ–¹å‘ï¼Œè¾“å…¥direction_keyword

# 7. æ–¹å‘å†…èšç±»
python step_B3_cluster_stageB.py
# é¢„æœŸï¼šå¯¹æ¯ä¸ªæ–¹å‘ç”Ÿæˆå­ç°‡ï¼Œè¾“å‡ºstageB_clusters.csvå’Œcluster_summary_B3.csv

# 8. å¯è§†åŒ–
python plot_clusters.py --stage A
python plot_clusters.py --stage B
# é¢„æœŸï¼šç”ŸæˆHTMLäº¤äº’å¼å›¾è¡¨

# 9. æŸ¥çœ‹Bé˜¶æ®µç»“æœ
æ‰“å¼€ data/cluster_summary_B3.csv
åˆ†ææ–¹å‘å†…çš„éœ€æ±‚åˆ†ç»„
```

---

## ğŸ“ æµ‹è¯•æ³¨æ„äº‹é¡¹

### 1. ä¾èµ–æ£€æŸ¥

ç¡®ä¿å·²å®‰è£…ï¼š
```bash
pip install pandas numpy
pip install sentence-transformers
pip install hdbscan
pip install plotly scikit-learn  # å¯è§†åŒ–éœ€è¦
pip install umap-learn  # å¯é€‰ï¼Œæ¨è
```

### 2. æ•°æ®å‡†å¤‡

ç¡®ä¿å­˜åœ¨ï¼š
- `data/merged_keywords_all.csv`ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå…ˆè¿è¡Œstep_A2_merge_csv.pyï¼‰

### 3. é¢„æœŸè¿è¡Œæ—¶é—´

- step_A3_clustering.py: 5-20åˆ†é’Ÿï¼ˆå–å†³äºæ•°æ®é‡ï¼‰
- cluster_stats.py: <1åˆ†é’Ÿ
- manual_direction_selector.py: 10-30åˆ†é’Ÿï¼ˆäººå·¥æ“ä½œï¼‰
- step_B3_cluster_stageB.py: 5-15åˆ†é’Ÿ
- plot_clusters.py: 2-5åˆ†é’Ÿ

---

## ğŸ‰ æ€»ç»“

### âœ… å·²å®Œæˆçš„æ ¸å¿ƒä»·å€¼

1. **example_phraseså­—æ®µ** - äººå·¥ç­›é€‰å¿…éœ€ï¼Œæœ€å…³é”®çš„ç¼ºå¤±åŠŸèƒ½
2. **äº¤äº’å¼æ–¹å‘ç­›é€‰å·¥å…·** - ä¸ç”¨æ‰‹åŠ¨ç¼–è¾‘CSV
3. **æ–¹å‘å†…èšç±»** - æ·±å…¥åˆ†ææ¯ä¸ªæ–¹å‘
4. **è´¨é‡åˆ†æå·¥å…·** - è‡ªåŠ¨è¯„ä¼°å’Œè°ƒä¼˜å»ºè®®
5. **å¯è§†åŒ–å·¥å…·** - ç›´è§‚æŸ¥çœ‹ç°‡åˆ†å¸ƒ
6. **å®Œæ•´å­—æ®µéªŒè¯** - ç¡®ä¿æ•°æ®è§„èŒƒ

### ç°åœ¨çš„çŠ¶æ€

**ä¹‹å‰**ï¼šåªæœ‰æœ€åŸºç¡€çš„èšç±»ï¼Œç¼ºå°‘å…³é”®å­—æ®µï¼Œæ— æ³•ç»§ç»­
**ç°åœ¨**ï¼šå®Œæ•´çš„è½»é‡ç‰ˆæµç¨‹ï¼Œå¯ä»¥ç«¯åˆ°ç«¯è¿è¡Œï¼Œäº§å‡ºå¯ç”¨çš„éœ€æ±‚åˆ†ç»„

**ä»A2åˆ°B3ï¼Œå®Œæ•´æµç¨‹æ‰“é€šï¼** ğŸ‰

---

**å®ç°å®Œæˆæ—¶é—´**: 2025-12-15 22:30
**ä¸‹ä¸€æ­¥**: è¿è¡Œæµ‹è¯•ï¼ŒéªŒè¯æ‰€æœ‰åŠŸèƒ½ï¼

**ç¥æµ‹è¯•é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜éšæ—¶åé¦ˆã€‚** ğŸš€
