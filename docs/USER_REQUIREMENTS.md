# 用户需求文档

**项目名称**: 词根聚类需求挖掘系统
**文档版本**: v1.0
**创建日期**: 2026-01-27
**最后更新**: 2026-01-27

---

## 📋 项目概述

### 项目背景

基于语义聚类的需求挖掘方法论系统，用于从英文单词种子（word roots）发现产品机会方向。

### 核心理念

**从单词 → 短语 → 语义簇 → 需求方向 → MVP验证**

### 目标用户

- 产品经理
- 需求分析师
- 市场研究人员
- 创业者

---

## 🎯 核心需求

### P0 需求（必须实现）

#### 1. 数据导入功能
**需求描述**: 支持从多种数据源导入关键词数据

**功能点**:
- ✅ 支持 CSV 文件上传
- ✅ 支持 SEMrush 数据导入
- ✅ 支持 Reddit 数据导入
- ✅ 支持 Related Search 数据导入
- ✅ 数据格式验证
- ✅ 数据清洗和标准化

**验收标准**:
- 能够成功上传 CSV 文件
- 能够解析并验证数据格式
- 能够显示导入结果统计
- 错误数据能够被识别并提示

---

#### 2. 语义聚类功能（核心）
**需求描述**: 对短语进行语义聚类，发现潜在的需求方向

**功能点**:
- ✅ 使用 Sentence Transformers 进行向量化
- ✅ 使用 HDBSCAN 进行聚类
- ✅ 支持参数调优（min_cluster_size, min_samples）
- ✅ 生成聚类结果（带 cluster_id）
- ✅ 生成簇级汇总统计

**技术要求**:
- Embedding 模型: `all-MiniLM-L6-v2`
- 聚类算法: HDBSCAN
- 目标簇数量: 60-100 个
- 噪音比例: < 25%

**验收标准**:
- 能够对 1000+ 短语进行聚类
- 聚类结果语义连贯
- 生成簇级汇总报告
- 支持参数调优

---

#### 3. 聚类结果可视化
**需求描述**: 以直观的方式展示聚类结果

**功能点**:
- ✅ 簇列表展示（按大小排序）
- ✅ 簇详情查看（包含的短语）
- ✅ 簇统计信息（大小、种子词分布）
- ✅ 噪音点单独展示
- ✅ 支持筛选和搜索

**验收标准**:
- 能够清晰展示所有簇
- 能够查看每个簇的详细信息
- 能够筛选和搜索特定簇
- 界面友好，易于操作

---

#### 4. 方向筛选功能
**需求描述**: 人工筛选出 5-10 个有价值的需求方向

**功能点**:
- ✅ 支持标记感兴趣的簇
- ✅ 支持标记 low priority 的簇
- ✅ 支持添加备注
- ✅ 生成筛选结果报告
- ✅ 导出筛选结果

**验收标准**:
- 能够标记和取消标记簇
- 能够添加和编辑备注
- 能够导出筛选结果为 CSV
- 筛选状态能够保存

---

#### 5. 数据导出功能
**需求描述**: 支持导出各阶段的数据结果

**功能点**:
- ✅ 导出聚类结果（CSV）
- ✅ 导出簇汇总（CSV）
- ✅ 导出筛选结果（CSV）
- ✅ 支持自定义导出字段
- ✅ 支持批量导出

**验收标准**:
- 能够导出完整的聚类结果
- 导出的 CSV 格式正确
- 能够在 Excel 中正常打开
- 包含所有必要字段

---

### P1 需求（重要但可以稍后）

#### 6. AI 辅助分析
**需求描述**: 使用 Claude API 辅助分析簇的语义

**功能点**:
- ⏳ 自动生成簇的语义解释
- ⏳ 识别簇的核心主题
- ⏳ 提供需求方向建议
- ⏳ 生成分析报告

**验收标准**:
- 能够调用 Claude API
- 生成的解释准确且有价值
- 响应时间 < 10 秒
- 支持批量分析

---

#### 7. 方向扩展功能
**需求描述**: 对筛选出的方向进行深度扩展

**功能点**:
- ⏳ 基于方向关键词扩展更多短语
- ⏳ 对方向内的短语进行二次聚类
- ⏳ 生成方向级别的分析报告
- ⏳ 识别子需求方向

**验收标准**:
- 能够扩展出更多相关短语
- 二次聚类结果合理
- 生成详细的方向分析报告

---

#### 8. 需求分析功能
**需求描述**: 对需求方向进行多维度分析

**功能点**:
- ⏳ 用户意图分析
- ⏳ 痛点识别
- ⏳ 解决方案建议
- ⏳ 竞品分析
- ⏳ 市场机会评估

**验收标准**:
- 能够识别用户意图
- 能够提取痛点
- 提供可行的解决方案建议
- 生成完整的分析报告

---

### P2 需求（可以延后）

#### 9. 趋势分析
**需求描述**: 分析关键词的搜索趋势

**功能点**:
- ⏳ 集成 Google Trends API
- ⏳ 展示搜索量趋势图
- ⏳ 识别上升/下降趋势
- ⏳ 季节性分析

---

#### 10. 协作功能
**需求描述**: 支持团队协作

**功能点**:
- ⏳ 多用户支持
- ⏳ 权限管理
- ⏳ 评论和讨论
- ⏳ 版本历史

---

#### 11. 需求库管理
**需求描述**: 建立需求方向的知识库

**功能点**:
- ⏳ 需求方向归档
- ⏳ 标签分类
- ⏳ 搜索和筛选
- ⏳ 关联分析

---

## 🔄 工作流程

### 阶段 A: 种子词扩展与聚类

#### A1: 种子词准备
- 输入: 46 个英文单词种子
- 输出: 种子词列表

#### A2: 短语扩展
- 输入: 种子词列表
- 方式: SEMrush / Reddit / Related Search
- 输出: `merged_keywords_all.csv`（约 1000-5000 条短语）

#### A3: 语义聚类（核心）
- 输入: `merged_keywords_all.csv`
- 算法: HDBSCAN + Sentence Transformers
- 输出:
  - `stageA_clusters.csv`（短语级，带 cluster_id）
  - `cluster_summary_A3.csv`（簇级汇总）
- 目标: 60-100 个语义簇

#### A4: 簇解释（可选）
- 输入: `cluster_summary_A3.csv`
- 方式: Claude API
- 输出: 每个簇的语义解释

#### A5: 人工筛选方向
- 输入: `cluster_summary_A3.csv`
- 方式: 人工审查
- 输出: `direction_keywords.csv`（5-10 个方向）

---

### 阶段 B: 方向深化与需求分析

#### B1: 方向扩展
- 输入: `direction_keywords.csv`
- 方式: SEMrush / Reddit
- 输出: 每个方向扩展 500-2000 条短语

#### B3: 方向内聚类
- 输入: 方向扩展结果
- 算法: HDBSCAN
- 输出: 方向内的子簇（10-30 个）

#### B6: 需求分析
- 输入: 方向内子簇
- 方式: Claude API + 5 维框架
- 输出: 需求分析报告

---

## 📊 数据字段规范

### 短语级字段（stageA_clusters.csv）

| 字段名 | 类型 | 必需 | 说明 |
|--------|------|------|------|
| keyword | string | ✅ | 短语内容 |
| seed_word | string | ✅ | 来源种子词 |
| seed_group | string | ✅ | 种子词分组 |
| source | string | ✅ | 数据来源（semrush/reddit/related_search） |
| search_volume | int | ⏳ | 搜索量 |
| cluster_id | int | ✅ | 簇 ID（-1 表示噪音） |

### 簇级字段（cluster_summary_A3.csv）

| 字段名 | 类型 | 必需 | 说明 |
|--------|------|------|------|
| cluster_id | int | ✅ | 簇 ID |
| cluster_size | int | ✅ | 簇大小 |
| seed_words_in_cluster | string | ✅ | 簇内种子词列表 |
| top_keywords | string | ✅ | 代表性短语（前 5 个） |
| cluster_label | string | ⏳ | 簇标签（AI 生成） |
| cluster_explanation | string | ⏳ | 簇解释（AI 生成） |

---

## 🎯 成功标准

### 功能完整性
- ✅ 所有 P0 需求已实现
- ⏳ 50% 以上 P1 需求已实现
- ⏳ 部分 P2 需求已实现

### 性能指标
- ✅ 聚类处理时间 < 5 分钟（1000 条短语）
- ✅ 页面加载时间 < 3 秒
- ✅ API 响应时间 < 1 秒

### 质量指标
- ✅ 聚类结果语义连贯性 > 80%
- ✅ 噪音比例 < 25%
- ✅ 用户满意度 > 4.0/5.0

---

## 🚀 实施计划

### Phase 1: 核心功能（当前阶段）
**目标**: 实现 P0 需求，建立基础工作流

**任务**:
1. ✅ 数据导入功能
2. ✅ 语义聚类功能
3. ✅ 聚类结果可视化
4. ⏳ 方向筛选功能
5. ⏳ 数据导出功能

**预期时间**: 2-3 周

---

### Phase 2: 增强功能
**目标**: 实现 P1 需求，提升用户体验

**任务**:
1. ⏳ AI 辅助分析
2. ⏳ 方向扩展功能
3. ⏳ 需求分析功能

**预期时间**: 3-4 周

---

### Phase 3: 高级功能
**目标**: 实现 P2 需求，完善系统

**任务**:
1. ⏳ 趋势分析
2. ⏳ 协作功能
3. ⏳ 需求库管理

**预期时间**: 4-6 周

---

## 📝 约束条件

### 技术约束
- 前端: Vue 3 + TypeScript
- 后端: FastAPI + Python 3.11
- AI: Claude API
- 数据: CSV 文件存储

### 性能约束
- 支持最多 10,000 条短语
- 聚类时间 < 5 分钟
- 页面响应时间 < 3 秒

### 资源约束
- 开发人员: 1-2 人
- 开发时间: 2-3 个月
- 预算: 有限

---

## 🔄 需求变更记录

### v1.0 (2026-01-27)
- 初始版本
- 定义 P0/P1/P2 需求
- 明确工作流程
- 定义数据字段规范

---

## 📞 联系方式

如有需求变更或问题，请：
1. 更新本文档
2. 通知相关开发人员
3. 记录变更历史

---

**注意**: 本文档是项目开发的核心依据，所有开发工作必须基于本文档进行。

---

*文档创建者: Claude Sonnet 4.5*
*最后更新: 2026-01-27*
