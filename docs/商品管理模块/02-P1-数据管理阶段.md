# å•†å“ç®¡ç†æ¨¡å— - P1 æ•°æ®ç®¡ç†é˜¶æ®µ

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-02-01
**æœ€åæ›´æ–°**: 2026-02-01

---

## ğŸ“‹ é˜¶æ®µæ¦‚è¿°

### é˜¶æ®µç›®æ ‡
**å»ºç«‹å•†å“æ•°æ®çš„å¯¼å…¥ã€ç®¡ç†å’Œå¯¼å‡ºèƒ½åŠ›**

### åŒ…å«åŠŸèƒ½
- âœ… **P1.1: æ•°æ®å¯¼å…¥åŠŸèƒ½** - æ”¯æŒ Excel/CSV æ–‡ä»¶å¯¼å…¥
- âœ… **P1.2: æ•°æ®ç®¡ç†åŠŸèƒ½** - æŸ¥è¯¢ã€ç­›é€‰ã€æ’åºã€ç¼–è¾‘ã€åˆ é™¤
- âœ… **P1.3: æ•°æ®å¯¼å‡ºåŠŸèƒ½** - æ”¯æŒ CSV/Excel æ ¼å¼å¯¼å‡º

### å®ŒæˆçŠ¶æ€
- **å®Œæˆåº¦**: 100% (3/3)
- **çŠ¶æ€**: âœ… å·²å®Œæˆ
- **å®Œæˆæ—¥æœŸ**: 2026-01-28

---

## ğŸ¯ P1.1: æ•°æ®å¯¼å…¥åŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°

**éœ€æ±‚ç¼–å·**: REQ-001
**ä¼˜å…ˆçº§**: ğŸ”´ P0 - æ ¸å¿ƒåŠŸèƒ½
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**åŠŸèƒ½æè¿°**: æ”¯æŒä» Excel/CSV æ–‡ä»¶å¯¼å…¥ Etsy å•†å“æ•°æ®

### è¾“å…¥æ ¼å¼è§„èŒƒ

#### æ–‡ä»¶æ ¼å¼è¦æ±‚
- **æ”¯æŒæ ¼å¼**: Excel (.xlsx, .xls) æˆ– CSV (.csv)
- **æ–‡ä»¶ç»“æ„**: **æ— è¡¨å¤´**ï¼ˆç¬¬ä¸€è¡Œå°±æ˜¯æ•°æ®ï¼‰
- **åˆ—æ•°**: å›ºå®š 5 åˆ—

#### åˆ—å®šä¹‰ï¼ˆæŒ‰é¡ºåºï¼‰

| åˆ—å· | å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|------|--------|------|------|------|------|
| 0 | product_name | string | âœ… | å•†å“åç§° | "Budget Planner Template" |
| 1 | rating | float | âŒ | è¯„åˆ†ï¼ˆ0-5ï¼‰ | 4.8 |
| 2 | review_count | string | âŒ | è¯„ä»·æ•°é‡ï¼ˆå¸¦æ‹¬å·å’Œå•ä½ï¼‰ | "(1.1k)" |
| 3 | shop_name | string | âŒ | åº—é“ºåç§° | "DigitalShop" |
| 4 | price | string | âŒ | ä»·æ ¼ | "$19.99" |

#### æ•°æ®ç¤ºä¾‹

```csv
Budget Planner Template,4.8,(1.1k),DigitalShop,$19.99
Notion Template for Students,4.9,(2.5k),NotionStore,$15.00
Excel Tracker,4.7,(500),ExcelMaster,$9.99
```

### æ•°æ®é¢„å¤„ç†

#### 1. è¯„ä»·æ•°é‡è½¬æ¢

**è½¬æ¢è§„åˆ™**:
```
(1.1k)   â†’ 1,100
(19.1k)  â†’ 19,100
(9.8k)   â†’ 9,800
(15)     â†’ 15
(2.5m)   â†’ 2,500,000
```

**å¤„ç†æ­¥éª¤**:
1. å»é™¤æ‹¬å·: `(1.1k)` â†’ `1.1k`
2. è¯†åˆ«å•ä½:
   - `k` æˆ– `K` â†’ Ã—1,000
   - `m` æˆ– `M` â†’ Ã—1,000,000
3. è½¬æ¢ä¸ºæ•´æ•°

**ä»£ç å®ç°**:
```python
def parse_review_count(value: str) -> Optional[int]:
    """
    è§£æè¯„ä»·æ•°é‡

    Args:
        value: åŸå§‹å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ "(1.1k)"

    Returns:
        æ•´æ•°å€¼ï¼Œä¾‹å¦‚ 1100
    """
    if not value or value.strip() == "":
        return None

    # å»é™¤æ‹¬å·å’Œç©ºæ ¼
    value = value.strip().replace("(", "").replace(")", "")

    # è½¬æ¢ä¸ºå°å†™
    value_lower = value.lower()

    # å¤„ç† k (åƒ)
    if 'k' in value_lower:
        number = float(value_lower.replace('k', ''))
        return int(number * 1000)

    # å¤„ç† m (ç™¾ä¸‡)
    if 'm' in value_lower:
        number = float(value_lower.replace('m', ''))
        return int(number * 1000000)

    # ç›´æ¥è½¬æ¢ä¸ºæ•´æ•°
    try:
        return int(float(value))
    except:
        return None
```

#### 2. ä»·æ ¼æ¸…æ´—

**å¤„ç†è§„åˆ™**:
- å»é™¤è´§å¸ç¬¦å·: `$`, `â‚¬`, `Â£`, `Â¥`
- å»é™¤ç©ºæ ¼
- è½¬æ¢ä¸ºæµ®ç‚¹æ•°

**ç¤ºä¾‹**:
```
"$19.99"  â†’ 19.99
"â‚¬15.50"  â†’ 15.50
"Â£9.99"   â†’ 9.99
```

#### 3. è¯„åˆ†éªŒè¯

**éªŒè¯è§„åˆ™**:
- èŒƒå›´: 0-5
- è¶…å‡ºèŒƒå›´çš„å€¼æ ‡è®°ä¸º NULL

#### 4. ç¼ºå¤±å€¼å¤„ç†

**å¤„ç†è§„åˆ™**:
- ç©ºå­—ç¬¦ä¸² â†’ NULL
- åªæœ‰ç©ºæ ¼ â†’ NULL
- ä¿ç•™ NULL å€¼

### API æ¥å£

#### å¯¼å…¥å•†å“æ•°æ®

**ç«¯ç‚¹**: `POST /api/products/import`

**è¯·æ±‚å‚æ•°**:
```json
{
  "file": "multipart/form-data"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "å¯¼å…¥æˆåŠŸ",
  "data": {
    "total_rows": 15792,
    "imported": 15792,
    "failed": 0,
    "import_time": "2026-01-28 10:30:00"
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "success": false,
  "message": "å¯¼å…¥å¤±è´¥",
  "error": "æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®"
}
```

### å‰ç«¯å®ç°

#### ä¸Šä¼ ç»„ä»¶

```jsx
<Upload
  accept=".csv,.xlsx,.xls"
  beforeUpload={handleBeforeUpload}
  customRequest={handleUpload}
  showUploadList={false}
>
  <Button icon={<UploadOutlined />}>
    ä¸Šä¼ å•†å“æ•°æ®
  </Button>
</Upload>
```

#### ä¸Šä¼ å¤„ç†

```javascript
const handleUpload = async (options) => {
  const { file } = options;
  const formData = new FormData();
  formData.append('file', file);

  try {
    message.loading({ content: 'æ­£åœ¨å¯¼å…¥...', key: 'importing' });

    const response = await axios.post('/api/products/import', formData, {
      headers: { 'Content-Type': 'multipart/form-data' }
    });

    message.destroy('importing');

    if (response.data.success) {
      message.success(`å¯¼å…¥æˆåŠŸï¼å…±å¯¼å…¥ ${response.data.data.imported} æ¡æ•°æ®`);
      refetchProducts();
    }
  } catch (error) {
    message.destroy('importing');
    message.error('å¯¼å…¥å¤±è´¥: ' + error.message);
  }
};
```

### éªŒæ”¶æ ‡å‡†

- âœ… èƒ½å¤ŸæˆåŠŸä¸Šä¼  Excel å’Œ CSV æ–‡ä»¶
- âœ… èƒ½å¤Ÿæ­£ç¡®è§£ææ— è¡¨å¤´çš„ 5 åˆ—æ•°æ®
- âœ… èƒ½å¤Ÿæ­£ç¡®è½¬æ¢è¯„ä»·æ•°é‡ï¼ˆk/m å•ä½ï¼‰
- âœ… èƒ½å¤Ÿå¤„ç† 10,000+ æ¡å•†å“æ•°æ®
- âœ… å¯¼å…¥æ—¶é—´ <30ç§’ï¼ˆ10,000æ¡ï¼‰
- âœ… æ•°æ®é¢„å¤„ç†å‡†ç¡®ç‡ >99%

### å¸¸è§é—®é¢˜

**Q1: ä¸ºä»€ä¹ˆè¦æ±‚æ— è¡¨å¤´æ ¼å¼ï¼Ÿ**
A: å› ä¸º Etsy å¯¼å‡ºçš„æ•°æ®é»˜è®¤æ— è¡¨å¤´ï¼Œç›´æ¥æ”¯æŒå¯ä»¥å‡å°‘ç”¨æˆ·çš„æ•°æ®å¤„ç†å·¥ä½œã€‚

**Q2: å¦‚æœæ–‡ä»¶æœ‰è¡¨å¤´æ€ä¹ˆåŠï¼Ÿ**
A: éœ€è¦æ‰‹åŠ¨åˆ é™¤ç¬¬ä¸€è¡Œè¡¨å¤´ï¼Œæˆ–è€…åœ¨ä»£ç ä¸­æ·»åŠ è·³è¿‡é¦–è¡Œçš„é€»è¾‘ã€‚

**Q3: æ”¯æŒçš„æœ€å¤§æ–‡ä»¶å¤§å°æ˜¯å¤šå°‘ï¼Ÿ**
A: å»ºè®®ä¸è¶…è¿‡ 50MBï¼Œçº¦ 100,000 æ¡æ•°æ®ã€‚

---

## ğŸ” P1.2: æ•°æ®ç®¡ç†åŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°

**éœ€æ±‚ç¼–å·**: REQ-002
**ä¼˜å…ˆçº§**: ğŸ”´ P0 - æ ¸å¿ƒåŠŸèƒ½
**çŠ¶æ€**: âœ… å·²ä¿®å¤ï¼ˆ2026-01-28ï¼‰

**åŠŸèƒ½æè¿°**: å¯¹å¯¼å…¥çš„å•†å“æ•°æ®è¿›è¡ŒæŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ç­‰åŸºæœ¬ç®¡ç†æ“ä½œ

### æŸ¥è¯¢åŠŸèƒ½

#### 1. åˆ†é¡µæŸ¥è¯¢

**å‚æ•°**:
- `page`: é¡µç ï¼ˆä» 1 å¼€å§‹ï¼‰
- `page_size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ 50ï¼‰

**ç¤ºä¾‹**:
```
GET /api/products/?page=1&page_size=50
```

**å“åº”**:
```json
{
  "success": true,
  "data": {
    "total": 15792,
    "page": 1,
    "page_size": 50,
    "items": [...]
  }
}
```

#### 2. å…¨æ–‡æœç´¢

**å‚æ•°**:
- `search`: æœç´¢å…³é”®è¯ï¼ˆå•†å“åç§°ï¼‰

**ç¤ºä¾‹**:
```
GET /api/products/?search=planner
```

**ç‰¹ç‚¹**:
- æ¨¡ç³ŠåŒ¹é…
- ä¸åŒºåˆ†å¤§å°å†™
- æœç´¢å•†å“åç§°å­—æ®µ

#### 3. å¤šæ¡ä»¶ç­›é€‰

**æ”¯æŒçš„ç­›é€‰æ¡ä»¶**:

| å‚æ•° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `min_rating` | float | æœ€ä½è¯„åˆ† | 4.0 |
| `max_rating` | float | æœ€é«˜è¯„åˆ† | 5.0 |
| `min_price` | float | æœ€ä½ä»·æ ¼ | 10.0 |
| `max_price` | float | æœ€é«˜ä»·æ ¼ | 50.0 |
| `min_review_count` | int | æœ€ä½è¯„ä»·æ•° | 1000 |
| `max_review_count` | int | æœ€é«˜è¯„ä»·æ•° | 5000 |
| `shop_name` | string | åº—é“ºåç§° | "DigitalShop" |
| `cluster_id` | int | ç°‡ID | 39 |
| `cluster_name` | string | ç±»åˆ«åç§°ï¼ˆæ¨¡ç³ŠåŒ¹é…ï¼‰ | "planner" |

**ç»„åˆç­›é€‰ç¤ºä¾‹**:
```
GET /api/products/?min_rating=4.5&min_price=10&max_price=30&cluster_name=planner
```

#### 4. æ’åºåŠŸèƒ½

**æ”¯æŒçš„æ’åºå­—æ®µ**:
- `product_id` - å•†å“ID
- `product_name` - å•†å“åç§°
- `rating` - è¯„åˆ†
- `review_count` - è¯„ä»·æ•°
- `price` - ä»·æ ¼
- `cluster_id` - ç°‡ID

**æ’åºå‚æ•°**:
- `sort_by`: æ’åºå­—æ®µ
- `sort_order`: æ’åºæ–¹å‘ï¼ˆ`asc` æˆ– `desc`ï¼‰

**ç¤ºä¾‹**:
```
GET /api/products/?sort_by=review_count&sort_order=desc
```

### ç¼–è¾‘åŠŸèƒ½

#### 1. å•æ¡ç¼–è¾‘

**ç«¯ç‚¹**: `PUT /api/products/{product_id}`

**è¯·æ±‚ä½“**:
```json
{
  "product_name": "Updated Product Name",
  "rating": 4.9,
  "price": 29.99
}
```

**å“åº”**:
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "product_id": 123,
    "product_name": "Updated Product Name",
    ...
  }
}
```

#### 2. æ‰¹é‡åˆ é™¤

**ç«¯ç‚¹**: `DELETE /api/products/batch`

**è¯·æ±‚ä½“**:
```json
{
  "product_ids": [1, 2, 3, 4, 5]
}
```

**ç‰¹ç‚¹**:
- **è½¯åˆ é™¤**: åªæ ‡è®° `is_deleted=true`ï¼Œä¸ç‰©ç†åˆ é™¤
- **å¯æ¢å¤**: å¯ä»¥é€šè¿‡æ•°æ®åº“æ“ä½œæ¢å¤
- **ä¿ç•™å†å²**: ä¿ç•™å®Œæ•´çš„æ•°æ®å†å²

**å“åº”**:
```json
{
  "success": true,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": {
    "deleted_count": 5
  }
}
```

### å‰ç«¯å®ç°

#### å•†å“è¡¨æ ¼

```jsx
<ProductTable
  data={products}
  loading={loading}
  pagination={{
    current: filters.page,
    pageSize: filters.page_size,
    total: total,
    onChange: handlePageChange
  }}
  onSort={handleSort}
  onFilter={handleFilter}
  onEdit={handleEdit}
  onDelete={handleDelete}
/>
```

#### ç­›é€‰å·¥å…·æ 

```jsx
<Space>
  {/* æœç´¢ */}
  <Input.Search
    placeholder="æœç´¢å•†å“åç§°"
    onSearch={handleSearch}
    style={{ width: 200 }}
  />

  {/* ç±»åˆ«ç­›é€‰ */}
  <Input
    placeholder="ç±»åˆ«åç§°"
    onChange={(e) => handleFilterChange('cluster_name', e.target.value)}
    style={{ width: 150 }}
  />

  {/* é«˜çº§ç­›é€‰ */}
  <Button
    icon={<FilterOutlined />}
    onClick={() => setAdvancedFilterVisible(!advancedFilterVisible)}
  >
    é«˜çº§ç­›é€‰
  </Button>
</Space>
```

#### é«˜çº§ç­›é€‰é¢æ¿

```jsx
{advancedFilterVisible && (
  <Card style={{ marginTop: 16 }}>
    <Row gutter={16}>
      <Col span={8}>
        <label>ä»·æ ¼èŒƒå›´ï¼š</label>
        <Input.Group compact>
          <Input
            style={{ width: '45%' }}
            placeholder="æœ€ä½ä»·æ ¼"
            onChange={(e) => handleFilterChange('min_price', e.target.value)}
          />
          <Input
            style={{ width: '10%', textAlign: 'center' }}
            placeholder="~"
            disabled
          />
          <Input
            style={{ width: '45%' }}
            placeholder="æœ€é«˜ä»·æ ¼"
            onChange={(e) => handleFilterChange('max_price', e.target.value)}
          />
        </Input.Group>
      </Col>

      <Col span={8}>
        <label>è¯„åˆ†èŒƒå›´ï¼š</label>
        <Input.Group compact>
          <Input
            style={{ width: '45%' }}
            placeholder="æœ€ä½è¯„åˆ†"
            onChange={(e) => handleFilterChange('min_rating', e.target.value)}
          />
          <Input
            style={{ width: '10%', textAlign: 'center' }}
            placeholder="~"
            disabled
          />
          <Input
            style={{ width: '45%' }}
            placeholder="æœ€é«˜è¯„åˆ†"
            onChange={(e) => handleFilterChange('max_rating', e.target.value)}
          />
        </Input.Group>
      </Col>

      <Col span={8}>
        <label>è¯„ä»·æ•°èŒƒå›´ï¼š</label>
        <Input.Group compact>
          <Input
            style={{ width: '45%' }}
            placeholder="æœ€ä½è¯„ä»·æ•°"
            onChange={(e) => handleFilterChange('min_review_count', e.target.value)}
          />
          <Input
            style={{ width: '10%', textAlign: 'center' }}
            placeholder="~"
            disabled
          />
          <Input
            style={{ width: '45%' }}
            placeholder="æœ€é«˜è¯„ä»·æ•°"
            onChange={(e) => handleFilterChange('max_review_count', e.target.value)}
          />
        </Input.Group>
      </Col>
    </Row>
  </Card>
)}
```

### ä¿®å¤å†å²

**ä¿®å¤æ—¥æœŸ**: 2026-01-28
**æäº¤**: commit 6bb0185c

**ä¿®å¤å†…å®¹**:
- âœ… æœç´¢åŠŸèƒ½å·²ä¿®å¤ï¼ˆå‚æ•°åä» keyword æ”¹ä¸º searchï¼‰
- âœ… æ’åºåŠŸèƒ½å·²ä¿®å¤ï¼ˆä¿®å¤å‚æ•°è§£æé€»è¾‘ï¼‰
- âœ… ç¿»é¡µåŠŸèƒ½å·²éªŒè¯æ­£å¸¸
- âœ… ç­›é€‰åŠŸèƒ½å·²éªŒè¯æ­£å¸¸ï¼ˆä»·æ ¼èŒƒå›´ç­›é€‰æµ‹è¯•é€šè¿‡ï¼‰

### éªŒæ”¶æ ‡å‡†

- âœ… æ’åºåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… ç­›é€‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… ç¿»é¡µåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… èƒ½å¤Ÿæµç•…å±•ç¤º 10,000+ æ¡æ•°æ®
- âœ… æœç´¢å“åº”æ—¶é—´ <1ç§’
- âœ… èƒ½å¤Ÿæ­£ç¡®ç­›é€‰å’Œæ’åº
- â³ èƒ½å¤ŸæˆåŠŸç¼–è¾‘å’Œä¿å­˜ï¼ˆå¾…æµ‹è¯•ï¼‰
- â³ èƒ½å¤Ÿæ‰¹é‡åˆ é™¤æ•°æ®ï¼ˆå¾…æµ‹è¯•ï¼‰

---

## ğŸ“¤ P1.3: æ•°æ®å¯¼å‡ºåŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°

**éœ€æ±‚ç¼–å·**: REQ-007
**ä¼˜å…ˆçº§**: ğŸ”´ P0 - æ ¸å¿ƒåŠŸèƒ½
**çŠ¶æ€**: âœ… å·²å®Œæˆ

**åŠŸèƒ½æè¿°**: æ”¯æŒå¯¼å‡ºå„é˜¶æ®µçš„æ•°æ®ç»“æœ

### å¯¼å‡ºç±»å‹

#### 1. åŸå§‹å•†å“æ•°æ®

**åŒ…å«å­—æ®µ**:
- product_id, product_name, rating, review_count
- shop_name, price, cluster_id, cluster_name
- delivery_type, user_need, import_time

**ç”¨é€”**: å¤‡ä»½åŸå§‹æ•°æ®ï¼Œç”¨äºå¤–éƒ¨åˆ†æ

#### 2. èšç±»ç»“æœ

**åŒ…å«å­—æ®µ**:
- æ‰€æœ‰å•†å“å­—æ®µ + cluster_id + cluster_name

**ç”¨é€”**: æŸ¥çœ‹èšç±»åˆ†ç»„ç»“æœ

#### 3. ç°‡çº§æ±‡æ€»

**åŒ…å«å­—æ®µ**:
- cluster_id, cluster_name, cluster_size
- avg_rating, avg_price, total_review_count
- top_products, user_need

**ç”¨é€”**: ç°‡çº§ç»Ÿè®¡åˆ†æ

### å¯¼å‡ºæ ¼å¼

#### 1. CSV æ ¼å¼

**ç‰¹ç‚¹**:
- æ–‡ä»¶å°ï¼ŒåŠ è½½å¿«
- å…¼å®¹æ€§å¥½
- é€‚åˆå¤§æ•°æ®é‡

**ç¤ºä¾‹**:
```csv
product_id,product_name,rating,review_count,price
1,"Budget Planner",4.8,1100,19.99
2,"Notion Template",4.9,2500,15.00
```

#### 2. Excel æ ¼å¼

**ç‰¹ç‚¹**:
- æ ¼å¼ç¾è§‚
- æ”¯æŒå¤šä¸ª Sheet
- é€‚åˆæŠ¥å‘Šå±•ç¤º

**Sheet ç»“æ„**:
- Sheet1: å•†å“æ•°æ®
- Sheet2: ç°‡æ±‡æ€»
- Sheet3: ç»Ÿè®¡ä¿¡æ¯

### API æ¥å£

#### å¯¼å‡ºå•†å“æ•°æ®

**ç«¯ç‚¹**: `GET /api/products/export`

**å‚æ•°**:
- `format`: å¯¼å‡ºæ ¼å¼ï¼ˆ`csv` æˆ– `excel`ï¼‰
- `type`: å¯¼å‡ºç±»å‹ï¼ˆ`products`, `clusters`, `summary`ï¼‰
- `filters`: ç­›é€‰æ¡ä»¶ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**:
```
GET /api/products/export?format=csv&type=products
```

**å“åº”**:
- Content-Type: `text/csv` æˆ– `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`
- Content-Disposition: `attachment; filename="products_20260201.csv"`

### å‰ç«¯å®ç°

#### å¯¼å‡ºæŒ‰é’®

```jsx
<Button
  icon={<DownloadOutlined />}
  onClick={handleExport}
>
  å¯¼å‡ºæ•°æ®
</Button>
```

#### å¯¼å‡ºå¤„ç†

```javascript
const handleExport = async () => {
  try {
    message.loading({ content: 'æ­£åœ¨å¯¼å‡º...', key: 'exporting' });

    const response = await axios.get('/api/products/export', {
      params: {
        format: 'csv',
        type: 'products',
        ...filters
      },
      responseType: 'blob'
    });

    // åˆ›å»ºä¸‹è½½é“¾æ¥
    const url = window.URL.createObjectURL(new Blob([response.data]));
    const link = document.createElement('a');
    link.href = url;
    link.setAttribute('download', `products_${Date.now()}.csv`);
    document.body.appendChild(link);
    link.click();
    link.remove();

    message.destroy('exporting');
    message.success('å¯¼å‡ºæˆåŠŸï¼');
  } catch (error) {
    message.destroy('exporting');
    message.error('å¯¼å‡ºå¤±è´¥: ' + error.message);
  }
};
```

### éªŒæ”¶æ ‡å‡†

- âœ… èƒ½å¤Ÿå¯¼å‡ºæ‰€æœ‰ç±»å‹çš„æ•°æ®
- âœ… å¯¼å‡ºæ—¶é—´ <30ç§’ï¼ˆ10,000æ¡ï¼‰
- âœ… å¯¼å‡ºçš„æ–‡ä»¶æ ¼å¼æ­£ç¡®
- âœ… èƒ½å¤Ÿåœ¨ Excel ä¸­æ­£å¸¸æ‰“å¼€

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### products è¡¨ç»“æ„

| å­—æ®µå | ç±»å‹ | å¿…éœ€ | ç´¢å¼• | è¯´æ˜ |
|--------|------|------|------|------|
| product_id | INTEGER | âœ… | PRIMARY KEY | å•†å“IDï¼ˆè‡ªå¢ï¼‰ |
| product_name | TEXT | âœ… | INDEX | å•†å“åç§° |
| rating | REAL | âŒ | - | è¯„åˆ†ï¼ˆ0-5ï¼‰ |
| review_count | INTEGER | âŒ | INDEX | è¯„ä»·æ•°é‡ |
| shop_name | TEXT | âŒ | - | åº—é“ºåç§° |
| price | REAL | âŒ | INDEX | ä»·æ ¼ |
| cluster_id | INTEGER | âŒ | INDEX | ç°‡ID |
| cluster_name | TEXT | âŒ | INDEX | ç±»åˆ«åç§° |
| cluster_name_cn | TEXT | âŒ | - | ç±»åˆ«åç§°ï¼ˆä¸­æ–‡ï¼‰ |
| delivery_type | TEXT | âŒ | - | äº¤ä»˜å½¢å¼ |
| user_need | TEXT | âŒ | - | æ»¡è¶³çš„éœ€æ±‚ |
| import_time | DATETIME | âœ… | - | å¯¼å…¥æ—¶é—´ |
| is_deleted | BOOLEAN | âœ… | INDEX | æ˜¯å¦åˆ é™¤ |

### ç´¢å¼•è®¾è®¡

**ä¸»è¦ç´¢å¼•**:
```sql
CREATE INDEX idx_product_name ON products(product_name);
CREATE INDEX idx_cluster_id ON products(cluster_id);
CREATE INDEX idx_cluster_name ON products(cluster_name);
CREATE INDEX idx_review_count ON products(review_count);
CREATE INDEX idx_price ON products(price);
CREATE INDEX idx_is_deleted ON products(is_deleted);
```

**å¤åˆç´¢å¼•**:
```sql
CREATE INDEX idx_cluster_deleted ON products(cluster_id, is_deleted);
CREATE INDEX idx_name_deleted ON products(product_name, is_deleted);
```

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### 1. æ‰¹é‡å¯¼å…¥ä¼˜åŒ–

**ç­–ç•¥**:
- ä½¿ç”¨æ‰¹é‡æ’å…¥ï¼ˆæ¯æ‰¹ 1000 æ¡ï¼‰
- å…³é—­è‡ªåŠ¨æäº¤
- ä½¿ç”¨äº‹åŠ¡

**ä»£ç ç¤ºä¾‹**:
```python
def batch_import(products: List[Dict], batch_size: int = 1000):
    """æ‰¹é‡å¯¼å…¥å•†å“"""
    for i in range(0, len(products), batch_size):
        batch = products[i:i + batch_size]
        db.bulk_insert_mappings(Product, batch)
        db.commit()
```

### 2. æŸ¥è¯¢ä¼˜åŒ–

**ç­–ç•¥**:
- ä½¿ç”¨ç´¢å¼•
- é¿å…å…¨è¡¨æ‰«æ
- åˆ†é¡µæŸ¥è¯¢

**æŸ¥è¯¢ç¤ºä¾‹**:
```python
# ä½¿ç”¨ç´¢å¼•
query = db.query(Product).filter(
    Product.cluster_id == cluster_id,
    Product.is_deleted == False
)

# åˆ†é¡µ
query = query.offset((page - 1) * page_size).limit(page_size)
```

### 3. å¯¼å‡ºä¼˜åŒ–

**ç­–ç•¥**:
- æµå¼å¯¼å‡º
- åˆ†æ‰¹è¯»å–
- å‹ç¼©æ–‡ä»¶

---

## ğŸ“ ç›¸å…³èµ„æº

### æ–‡æ¡£å¯¼èˆª
- **[è¿”å›ç´¢å¼•](./README.md)** - æ–‡æ¡£å¯¼èˆª
- **[ä¸Šä¸€ç¯‡ï¼šæ¨¡å—æ¦‚è¿°](./01-æ¨¡å—æ¦‚è¿°ä¸æ ¸å¿ƒä»·å€¼.md)** - æ¨¡å—å®šä½å’Œæ ¸å¿ƒä»·å€¼
- **[ä¸‹ä¸€ç¯‡ï¼šP2-èšç±»åˆ†æé˜¶æ®µ](./03-P2-èšç±»åˆ†æé˜¶æ®µ.md)** - è¯­ä¹‰èšç±»åŠŸèƒ½

### ä»£ç ä½ç½®
- **åç«¯æœåŠ¡**: `backend/services/product_service.py`
- **åç«¯è·¯ç”±**: `backend/routers/products.py`
- **å‰ç«¯é¡µé¢**: `frontend/src/pages/products/ProductManagement.jsx`
- **å‰ç«¯ç»„ä»¶**: `frontend/src/components/ProductTable.jsx`

### API æ–‡æ¡£
- **Swagger UI**: http://localhost:8002/docs
- **API ç«¯ç‚¹**: `/api/products/*`

---

**æ–‡æ¡£åˆ›å»ºè€…**: Claude Sonnet 4.5
**æœ€åæ›´æ–°**: 2026-02-01

---

*æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†æ•°æ®ç®¡ç†é˜¶æ®µçš„ä¸‰ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯¼å…¥ã€ç®¡ç†å’Œå¯¼å‡ºã€‚*
