# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ ç¬¬ä¸€æ¬¡ä½¿ç”¨

### 1. å®‰è£…ä¾èµ–

```bash
cd D:\xiangmu\è¯æ ¹èšç±»éœ€æ±‚æŒ–æ˜\åŠŸèƒ½å®ç°
pip install -r requirements.txt
```

### 2. é…ç½®å‚æ•°

ç¼–è¾‘ `config.py`ï¼š

```python
# ç¡®è®¤è¾“å…¥æ•°æ®è·¯å¾„
RAW_DATA_DIR = r"C:\Users\32941\Downloads\åˆå¹¶"  # ä½ çš„CSVæ–‡ä»¶æ‰€åœ¨ç›®å½•

# å¯é€‰ï¼šå¦‚æœéœ€è¦ä½¿ç”¨å¤§æ¨¡å‹APIï¼ˆæ­¥éª¤A4ï¼‰ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡
# Windows PowerShell:
# $env:OPENAI_API_KEY = "your-api-key"
```

### 3. è¿è¡Œæµç¨‹

#### æ­¥éª¤A2ï¼šåˆå¹¶CSVæ–‡ä»¶

```bash
python step_A2_merge_csv.py
```

**è¾“å‡º**ï¼š
- `../data/merged_keywords_all.csv` - åˆå¹¶åçš„å®Œæ•´æ•°æ®æ–‡ä»¶

**é¢„æœŸç»“æœ**ï¼š
- åˆå¹¶47ä¸ªCSVæ–‡ä»¶
- æ€»è¡Œæ•°çº¦6,565æ¡
- åŒ…å«46ä¸ªç§å­è¯

---

#### æ­¥éª¤A3ï¼šè¯­ä¹‰èšç±»

```bash
python step_A3_clustering.py
```

**è¾“å‡º**ï¼š
- `../data/stageA_clusters.csv` - å¸¦ç°‡æ ‡ç­¾çš„çŸ­è¯­æ•°æ®
- `../data/clusters_summary_stageA.csv` - ç°‡çº§ç»Ÿè®¡ä¿¡æ¯

**é¢„æœŸç»“æœ**ï¼š
- ç”Ÿæˆè‹¥å¹²ä¸ªè¯­ä¹‰ç°‡ï¼ˆæ•°é‡å–å†³äºå‚æ•°è®¾ç½®ï¼‰
- æ¯ä¸ªç°‡åŒ…å«è¯­ä¹‰ç›¸ä¼¼çš„å…³é”®è¯

**æ³¨æ„äº‹é¡¹**ï¼š
- é¦–æ¬¡è¿è¡Œä¼šä¸‹è½½embeddingæ¨¡å‹ï¼ˆçº¦90MBï¼‰
- é¢„è®¡è¿è¡Œæ—¶é—´ï¼š5-10åˆ†é’Ÿï¼ˆå–å†³äºCPUæ€§èƒ½ï¼‰
- å¦‚æœå†…å­˜ä¸è¶³ï¼Œå¯åœ¨`config.py`ä¸­è®¾ç½®`max_phrases`é™åˆ¶æ•°æ®é‡

---

#### æ­¥éª¤A4ï¼šç°‡çº§ç†è§£ï¼ˆå¾…å®ç°ï¼‰

```bash
python step_A4_llm_cluster_summary.py
```

**åŠŸèƒ½**ï¼šä½¿ç”¨å¤§æ¨¡å‹ä¸ºæ¯ä¸ªç°‡ç”Ÿæˆäººç±»å¯è¯»çš„æè¿°

**éœ€è¦**ï¼š
- OpenAI API Key æˆ– å…¶ä»–å¤§æ¨¡å‹API
- è®¾ç½®ç¯å¢ƒå˜é‡ï¼š`OPENAI_API_KEY`

---

## ğŸ“Š æŸ¥çœ‹ç»“æœ

### åˆå¹¶åçš„æ•°æ®æ ¼å¼

`merged_keywords_all.csv`:

| Keyword | Intent | Volume | Trend | ... | seed_word | source_file |
|---------|--------|--------|-------|-----|-----------|-------------|
| compress pdf online | Informational | 12100 | ... | ... | compress | compress_broad-match_us_2025-12-12.csv |

### èšç±»åçš„æ•°æ®æ ¼å¼

`stageA_clusters.csv`:

| phrase | seed_word | Volume | frequency | cluster_id |
|--------|-----------|--------|-----------|------------|
| compress pdf online | compress | 12100 | 3 | 5 |
| pdf compressor | compress | 8100 | 2 | 5 |

### ç°‡çº§ç»Ÿè®¡

`clusters_summary_stageA.csv`:

| cluster_id | cluster_size | total_frequency | seed_words_in_cluster | total_volume |
|------------|--------------|-----------------|----------------------|--------------|
| 5 | 25 | 150 | compress,converter | 250000 |

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: ImportError: No module named 'sentence_transformers'

**è§£å†³**ï¼š
```bash
pip install sentence-transformers
```

### Q2: èšç±»ç»“æœç°‡å¤ªå¤š/å¤ªå°‘

**è§£å†³**ï¼šè°ƒæ•´ `config.py` ä¸­çš„èšç±»å‚æ•°ï¼š

```python
A3_CONFIG = {
    # HDBSCANå‚æ•°
    "min_cluster_size": 5,  # å¢å¤§ â†’ ç°‡æ›´å°‘ä½†æ›´å¤§
    "min_samples": 2,       # å¢å¤§ â†’ æ›´ä¸¥æ ¼ï¼Œå™ªéŸ³ç‚¹æ›´å¤š

    # æˆ–ä½¿ç”¨KMeans
    "clustering_method": "kmeans",
    "n_clusters": 30,  # ç›´æ¥æŒ‡å®šç°‡æ•°é‡
}
```

### Q3: å†…å­˜ä¸è¶³

**è§£å†³**ï¼šé™åˆ¶å¤„ç†çš„æ•°æ®é‡

```python
A3_CONFIG = {
    "max_phrases": 3000,  # åªå¤„ç†å‰3000æ¡ï¼ˆæŒ‰æœç´¢é‡æ’åºï¼‰
}
```

### Q4: è¿è¡Œå¤ªæ…¢

**è§£å†³**ï¼š
1. ä½¿ç”¨æ›´å°çš„embeddingæ¨¡å‹ï¼š
```python
A3_CONFIG = {
    "embedding_model": "all-MiniLM-L6-v2",  # æœ€å¿«
}
```

2. å¦‚æœæœ‰GPUï¼š
```python
A3_CONFIG = {
    "use_gpu": True,
}
```

---

## ğŸ“ ä¸‹ä¸€æ­¥è®¡åˆ’

1. âœ… æ­¥éª¤A2ï¼šåˆå¹¶CSVæ–‡ä»¶
2. âœ… æ­¥éª¤A3ï¼šè¯­ä¹‰èšç±»
3. â³ æ­¥éª¤A4ï¼šç°‡çº§ç†è§£ï¼ˆä½¿ç”¨å¤§æ¨¡å‹ï¼‰
4. â³ æ­¥éª¤A5ï¼šæ–¹å‘ç­›é€‰
5. â³ é˜¶æ®µBï¼šä»æ–¹å‘åˆ°éœ€æ±‚
6. â³ é˜¶æ®µCï¼šéœ€æ±‚çŸ¥è¯†åº“

---

## ğŸ’¡ æç¤º

- æ¯ä¸ªæ­¥éª¤çš„è¾“å‡ºæ–‡ä»¶éƒ½åœ¨ `../data/` ç›®å½•ä¸‹
- æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `../output/execution.log`
- å¯ä»¥éšæ—¶æŸ¥çœ‹ `README.md` äº†è§£å®Œæ•´æµç¨‹
