# 数据文件分类指南

## 📁 目录结构

您需要将三种数据分别放到对应的文件夹：

```
data/raw/
├── semrush/          ← SEMRUSH数据（CSV）
├── dropdown/         ← 下拉词数据（CSV）
└── related_search/   ← 相关搜索数据（CSV/Excel）
```

## 🔍 如何识别和分类文件？

### 方法1：根据文件名识别

查看文件名中的关键词：
- 包含 `semrush`, `broad-match` → SEMRUSH数据
- 包含 `dropdown`, `下拉` → 下拉词数据
- 包含 `related`, `相关搜索` → 相关搜索数据

### 方法2：根据文件内容识别

打开CSV文件查看第一行（列名）：

**SEMRUSH数据**：
- 通常包含：`Keyword`, `Search Volume`, `Keyword Difficulty`, `CPC`
- 或者：`phrase`, `seed_word`, `volume`, `frequency`

**下拉词数据**：
- 通常包含：`keyword`, `seed`, `source`
- 数据来源：Google下拉框建议

**相关搜索数据**：
- 通常包含：`keyword`, `related_keyword`, `seed`
- 数据来源：Google页面底部"相关搜索"

### 方法3：根据数据特征识别

**SEMRUSH**：
- ✓ 有搜索量（Volume）数据
- ✓ 有竞争度、CPC等指标
- ✓ 数据量通常较大（几千到几万条）

**下拉词**：
- ✓ 没有搜索量数据
- ✓ 短语通常较短（1-5个词）
- ✓ 都是完整的搜索建议

**相关搜索**：
- ✓ 没有搜索量数据
- ✓ 与种子词相关度高
- ✓ 通常每个种子词8-10条相关词

## 📝 分类步骤

### 快速分类（手动）

1. **保持SEMRUSH数据在原位置**
   ```
   data/raw/semrush/  ← 不需要移动
   ```

2. **移动下拉词数据**
   ```
   从：data/raw/semrush/[下拉词文件].csv
   到：  data/raw/dropdown/[下拉词文件].csv
   ```

3. **移动相关搜索数据**
   ```
   从：data/raw/semrush/[相关搜索文件].csv
   到：  data/raw/related_search/[相关搜索文件].csv
   ```

### 使用脚本辅助（推荐）

我已经看到您有这些文件：
- `1_ai_detector_2025-12-26.csv`, `2_apk_2025-12-26.csv` 等
- `agents_broad-match_us_2025-12-26.csv` 等（包含broad-match的应该是SEMRUSH）
- `tokens_segmented (1).csv`
- `影刀数据表格_20251226-191438.xlsx`

## ⚠️ 重要提示

### 当前问题
您现在有 **110+ 个CSV文件** 都在 `semrush/` 目录下，程序会尝试**全部合并读取**（除了example开头的文件）。

### 建议操作

**选项A：如果这些都是SEMRUSH数据**
- ✅ 无需移动，程序会自动合并所有CSV文件
- ⚠️ 确保所有文件格式一致（都有 phrase, seed_word 列）

**选项B：如果混合了三种数据类型**
- ❌ 必须手动分类到对应文件夹
- ✅ 程序才能正确识别和处理

## 🎯 推荐方案

1. **先测试一个文件**
   ```bash
   # 备份当前文件
   mkdir D:\xiangmu\词根聚类需求挖掘\data\raw\semrush_backup
   move D:\xiangmu\词根聚类需求挖掘\data\raw\semrush\*.csv D:\xiangmu\词根聚类需求挖掘\data\raw\semrush_backup\

   # 只保留1-2个测试文件
   copy D:\xiangmu\词根聚类需求挖掘\data\raw\semrush_backup\agents_broad-match_us_2025-12-26.csv D:\xiangmu\词根聚类需求挖掘\data\raw\semrush\

   # 运行测试
   python scripts/run_phase1_import.py --dry-run
   ```

2. **确认文件格式**

   打开 `agents_broad-match_us_2025-12-26.csv` 查看：
   - 有哪些列？
   - 是否包含 phrase/seed_word？
   - 数据格式是什么样的？

3. **根据结果调整**
   - 如果格式正确 → 批量导入所有文件
   - 如果格式不对 → 需要先做数据清洗/转换

## 📋 标准数据格式要求

无论哪种数据源，CSV文件都需要包含这些列：

### 必需列
```csv
phrase,seed_word
best calculator app,calculator
free online calculator,calculator
```

### 推荐列
```csv
phrase,seed_word,frequency,volume
best calculator app,calculator,100,12000
free online calculator,calculator,80,8500
```

## 🔧 下一步操作

请告诉我：
1. **这110+个文件都是什么类型的数据？**
   - [ ] 全部是SEMRUSH数据
   - [ ] 混合了三种类型
   - [ ] 不确定

2. **文件内容是什么格式？**
   - 请打开任意一个文件（如 `agents_broad-match_us_2025-12-26.csv`）
   - 告诉我前3行内容，我帮您判断

3. **您希望如何处理？**
   - [ ] 我自己手动分类到三个文件夹
   - [ ] 全部当SEMRUSH数据导入
   - [ ] 需要帮助判断文件类型

---

**当前目录状态**：
```
✅ data/raw/semrush/       - 已存在（110+ CSV文件）
✅ data/raw/dropdown/      - 已创建（空）
✅ data/raw/related_search/ - 已创建（空）
```

准备好后，运行导入即可！
